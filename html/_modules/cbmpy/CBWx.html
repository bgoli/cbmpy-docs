<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>cbmpy.CBWx &#8212; CBMPy 0.7.13 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.7.13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within CBMPy 0.7.13 documentation"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="CBMPy 0.7.13 documentation" href="../../cbmpy.html" />
    <link rel="up" title="Module code" href="../index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for cbmpy.CBWx</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">CBMPy: CBWx module</span>
<span class="sd">===================</span>
<span class="sd">PySCeS Constraint Based Modelling (http://cbmpy.sourceforge.net)</span>
<span class="sd">Copyright (C) 2009-2017 Brett G. Olivier, VU University Amsterdam, Amsterdam, The Netherlands</span>

<span class="sd">This program is free software: you can redistribute it and/or modify</span>
<span class="sd">it under the terms of the GNU General Public License as published by</span>
<span class="sd">the Free Software Foundation, either version 3 of the License, or</span>
<span class="sd">(at your option) any later version.</span>

<span class="sd">This program is distributed in the hope that it will be useful,</span>
<span class="sd">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="sd">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="sd">GNU General Public License for more details.</span>

<span class="sd">You should have received a copy of the GNU General Public License</span>
<span class="sd">along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;</span>

<span class="sd">Author: Brett G. Olivier</span>
<span class="sd">Contact email: bgoli@users.sourceforge.net</span>
<span class="sd">Last edit: $Author: bgoli $ ($Id: CBWx.py 575 2017-04-13 12:18:44Z bgoli $)</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># preparing for Python 3 port</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span>
<span class="c1">#from __future__ import unicode_literals</span>

<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">random</span><span class="o">,</span> <span class="nn">math</span><span class="o">,</span> <span class="nn">re</span><span class="o">,</span> <span class="nn">webbrowser</span><span class="o">,</span> <span class="nn">locale</span><span class="o">,</span> <span class="nn">sys</span>
<span class="c1"># this is a hack that needs to be streamlined a bit</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">cStringIO</span> <span class="k">as</span> <span class="nn">csio</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">io</span> <span class="k">as</span> <span class="nn">csio</span>
<span class="n">HAVE_WX</span> <span class="o">=</span> <span class="kc">False</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">wx</span>
    <span class="kn">import</span> <span class="nn">wx.grid</span>
    <span class="kn">import</span> <span class="nn">wx.html</span>
    <span class="kn">import</span> <span class="nn">wx.lib.ClickableHtmlWindow</span>
    <span class="kn">import</span> <span class="nn">wx.aui</span>
    <span class="kn">import</span> <span class="nn">wx.lib.colourdb</span>
    <span class="kn">from</span> <span class="nn">wx.lib.floatcanvas</span> <span class="k">import</span> <span class="n">NavCanvas</span><span class="p">,</span> <span class="n">FloatCanvas</span><span class="p">,</span> <span class="n">Resources</span>
    <span class="kn">from</span> <span class="nn">wx.lib</span> <span class="k">import</span> <span class="n">scrolledpanel</span>
    <span class="kn">import</span>  <span class="nn">wx.lib.mixins.listctrl</span>  <span class="k">as</span>  <span class="nn">listmix</span>
    <span class="kn">from</span> <span class="nn">wx</span> <span class="k">import</span> <span class="n">ImageFromStream</span><span class="p">,</span> <span class="n">BitmapFromImage</span>
    <span class="n">HAVE_WX</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WX GUI tools available.&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">WX GUI tools not available.&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

<span class="n">HAVE_URLLIB2</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">urllib2</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">HAVE_URLLIB2</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">if</span> <span class="n">HAVE_WX</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">ModelEditor</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
        <span class="n">PanelSize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1100</span><span class="p">,</span><span class="mi">600</span><span class="p">)</span>
        <span class="n">RPwidth</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="n">RPheight</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">LPwidth</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="n">LPheight</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">mainSizer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">RGridCol</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">RGridRow</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">rlabels</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Reaction&#39;</span><span class="p">,</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span><span class="s1">&#39;Flux&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">,</span><span class="s1">&#39;LB&#39;</span><span class="p">,</span><span class="s1">&#39;UB&#39;</span><span class="p">,</span><span class="s1">&#39;RCost&#39;</span><span class="p">,</span><span class="s1">&#39;Exch&#39;</span><span class="p">,</span><span class="s1">&#39;Balanced&#39;</span><span class="p">)</span>
        <span class="n">NOVAL</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;None&#39;</span><span class="p">)</span>
        <span class="n">RGrid</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">pybox</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">NoteB1</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">NoteB1_Psession</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">NoteB1_Preaction</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">NoteB1_Prelate</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">NoteB1_Pgene</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">FCanvas_met</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">FCanvas_gen</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">Colour</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">Rinfbox</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">_cmod_</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">_cbm_</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">MainPanel</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">StatusBar</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">OUT_dir</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">OUT_file</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">STS_OBJ_FUNC</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">STS_OBJ_SENSE</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">STS_OBJ_COND</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">BUT_minsum</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">BUT_optimise</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">RGridOK</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">__ActiveReaction</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">__ScaledReducedCost</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">__BoundaryDetection</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">WX_COLOURS</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">FC_LineStyles</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">__C_BUFF__</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">RGdict</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">SGdict</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">GGdict</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">Rmap</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">Smap</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">GPRmap</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">PRGmap</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">OnlyActiveReactions</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">ZERO_TOL</span> <span class="o">=</span> <span class="mf">1.0e-11</span>
        <span class="n">SEARCH_MODE</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">RTreeCache</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ReactionBalanceInfo</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">FontCache</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">SemanticSBMLClient</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmod</span><span class="p">):</span>
            <span class="n">mystyle</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">DEFAULT_DIALOG_STYLE</span>
            <span class="n">mystyle</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">DEFAULT_FRAME_STYLE</span>
            <span class="n">fSize</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">DisplaySize</span><span class="p">()</span>
            <span class="n">fSize</span> <span class="o">=</span> <span class="n">fSize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">fSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">50</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">mystyle</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;frame1&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="n">fSize</span><span class="p">)</span>
            <span class="c1">#self.SetSize(self.PanelSize)</span>
            <span class="c1">#self.SetMinSize(self.PanelSize)</span>
            <span class="c1">#self.ShowFullScreen(True)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetTitle</span><span class="p">(</span><span class="s1">&#39;PySCeS-CBM Model Editor - editing: </span><span class="si">%s</span><span class="s1"> (</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cmod</span><span class="o">.</span><span class="n">getId</span><span class="p">(),</span> <span class="n">cmod</span><span class="o">.</span><span class="n">getName</span><span class="p">()))</span>
            <span class="n">fSize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()</span>
            <span class="n">fSize</span> <span class="o">=</span> <span class="n">fSize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">fSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">20</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MainPanel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">fSize</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MainPanel</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">fSize</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MainPanel</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="n">fSize</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MainPanel</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span> <span class="o">=</span> <span class="n">cmod</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__C_BUFF__</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGridRow</span> <span class="o">=</span> <span class="n">cmod</span><span class="o">.</span><span class="n">getReactionIds</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGdict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SGdict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GGdict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Rmap</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Smap</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GPRmap</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PRGmap</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RTreeCache</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ReactionBalanceInfo</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FontCache</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">BuildMainPanel</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CreateRGrid</span><span class="p">()</span>
            <span class="c1">#self.LeftPanel.Refresh()</span>
            <span class="c1">#self.MainPanel.UpdateWindowUI()</span>

            <span class="kn">import</span> <span class="nn">cbmpy</span> <span class="k">as</span> <span class="nn">cbm</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cbm_</span> <span class="o">=</span> <span class="n">cbm</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">OUT_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UpdateModelStatus</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CreateMaps</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1">#self.RESTClient = cbm.CBNetDB.RESTClient()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SemanticSBMLClient</span> <span class="o">=</span> <span class="n">cbm</span><span class="o">.</span><span class="n">CBNetDB</span><span class="o">.</span><span class="n">SemanticSBML</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;REST web serices not available&#39;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">EVT_SEARCH_MODE_SELECT</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="mi">211</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_MODE</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">searchSelectmenu</span><span class="o">.</span><span class="n">Check</span><span class="p">(</span><span class="mi">211</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">searchSelectmenu</span><span class="o">.</span><span class="n">Check</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_OBJ</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="mi">212</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_MODE</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">searchSelectmenu</span><span class="o">.</span><span class="n">Check</span><span class="p">(</span><span class="mi">211</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">searchSelectmenu</span><span class="o">.</span><span class="n">Check</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_OBJ</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Search mode selected:&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_MODE</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">())</span>

        <span class="k">def</span> <span class="nf">BuildMainPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="c1"># build some frame stuff</span>
            <span class="c1"># Setting up the menu.</span>
            <span class="n">filemenu</span><span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Menu</span><span class="p">()</span>
            <span class="n">menuSave</span> <span class="o">=</span> <span class="n">filemenu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span> <span class="s2">&quot;&amp;Save Model&quot;</span><span class="p">,</span><span class="s2">&quot; Save to SBML&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ID_SAVE</span><span class="p">)</span>
            <span class="n">menuExport</span> <span class="o">=</span> <span class="n">filemenu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="s2">&quot;Save S&amp;ession&quot;</span><span class="p">,</span><span class="s2">&quot; Export session as Python script&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ID_SAVE</span><span class="p">)</span>
            <span class="n">menuAbout</span><span class="o">=</span> <span class="n">filemenu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="mi">103</span><span class="p">,</span> <span class="s2">&quot;&amp;About&quot;</span><span class="p">,</span><span class="s2">&quot; Information about this program&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ID_ABOUT</span><span class="p">)</span>
            <span class="n">menuExit</span> <span class="o">=</span> <span class="n">filemenu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="mi">104</span><span class="p">,</span><span class="s2">&quot;E&amp;xit&quot;</span><span class="p">,</span><span class="s2">&quot; Terminate the program&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ID_EXIT</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">searchSelectmenu</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Menu</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CHECK_AUTOCOMP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchSelectmenu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="mi">211</span><span class="p">,</span> <span class="s1">&#39;AutoComplete&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_CHECK</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CHECK_SUBSEARCH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchSelectmenu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span> <span class="s1">&#39;Subsearch&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_CHECK</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EVT_SEARCH_MODE_SELECT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">CHECK_AUTOCOMP</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EVT_SEARCH_MODE_SELECT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">CHECK_SUBSEARCH</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">searchSelectmenu</span><span class="o">.</span><span class="n">Check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CHECK_AUTOCOMP</span><span class="o">.</span><span class="n">GetId</span><span class="p">(),</span> <span class="kc">True</span><span class="p">)</span>

            <span class="n">optionsMenu</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Menu</span><span class="p">()</span>
            <span class="n">optionsMenu</span><span class="o">.</span><span class="n">AppendMenu</span><span class="p">(</span><span class="mi">201</span><span class="p">,</span> <span class="s1">&#39;&amp;Search mode&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchSelectmenu</span><span class="p">)</span>

            <span class="n">actionMenu</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Menu</span><span class="p">()</span>
            <span class="n">menuAnalyseBalances</span> <span class="o">=</span> <span class="n">actionMenu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="mi">301</span><span class="p">,</span> <span class="s1">&#39;Run &amp;Balance Checker&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ID_DEFAULT</span><span class="p">)</span>
            <span class="n">SemSBMLMenu</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Menu</span><span class="p">()</span>
            <span class="n">menuSemSBMLMenu_name</span> <span class="o">=</span> <span class="n">SemSBMLMenu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="mi">311</span><span class="p">,</span> <span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ID_DEFAULT</span><span class="p">)</span>
            <span class="n">menuSemSBMLMenu_id</span> <span class="o">=</span> <span class="n">SemSBMLMenu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="mi">312</span><span class="p">,</span> <span class="s1">&#39;Id&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ID_DEFAULT</span><span class="p">)</span>
            <span class="n">actionMenu</span><span class="o">.</span><span class="n">AppendMenu</span><span class="p">(</span><span class="mi">302</span><span class="p">,</span> <span class="s1">&#39;Run Semantic &amp;SBML&#39;</span><span class="p">,</span> <span class="n">SemSBMLMenu</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MENUAnalyseBalances</span><span class="p">,</span> <span class="n">menuAnalyseBalances</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SemSBML_name</span><span class="p">,</span> <span class="n">menuSemSBMLMenu_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SemSBML_id</span><span class="p">,</span> <span class="n">menuSemSBMLMenu_id</span><span class="p">)</span>



            <span class="c1"># Creating the menubar and statusbar</span>
            <span class="n">menuBar</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">MenuBar</span><span class="p">()</span>
            <span class="n">menuBar</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">filemenu</span><span class="p">,</span><span class="s2">&quot;&amp;File&quot;</span><span class="p">)</span> <span class="c1"># Adding the &quot;filemenu&quot; to the MenuBar</span>
            <span class="n">menuBar</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">optionsMenu</span><span class="p">,</span><span class="s2">&quot;&amp;Options&quot;</span><span class="p">)</span> <span class="c1"># Adding the &quot;filemenu&quot; to the MenuBar</span>
            <span class="n">menuBar</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">actionMenu</span><span class="p">,</span><span class="s2">&quot;&amp;Action&quot;</span><span class="p">)</span> <span class="c1"># Adding the &quot;filemenu&quot; to the MenuBar</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetMenuBar</span><span class="p">(</span><span class="n">menuBar</span><span class="p">)</span>  <span class="c1"># Adding the MenuBar to the Frame content.</span>
            <span class="c1"># Menu Events.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MENUOnSave</span><span class="p">,</span> <span class="n">menuSave</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MENUExport</span><span class="p">,</span> <span class="n">menuExport</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MENUOnExit</span><span class="p">,</span> <span class="n">menuExit</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MENUOnAbout</span><span class="p">,</span> <span class="n">menuAbout</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">StatusBar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CreateStatusBar</span><span class="p">()</span> <span class="c1"># A StatusBar in the bottom of the window</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetStatusText</span><span class="p">(</span><span class="s2">&quot;Ready!&quot;</span><span class="p">)</span>

            <span class="c1"># create the sizers</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mainSizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>

            <span class="c1"># Checkbox</span>
            <span class="c1">##  self.insure = wx.CheckBox(self, label=&quot;Do you want Insured Shipment ?&quot;)</span>
            <span class="c1">##  grid.Add(self.insure, pos=(4,0), span=(1,2), flag=wx.BOTTOM, border=5)</span>
            <span class="c1">##  self.Bind(wx.EVT_CHECKBOX, self.EvtCheckBox, self.insure)</span>

            <span class="c1"># Radio Boxes</span>
            <span class="c1">##  radioList = [&#39;blue&#39;, &#39;red&#39;, &#39;yellow&#39;, &#39;orange&#39;, &#39;green&#39;, &#39;purple&#39;, &#39;navy blue&#39;, &#39;black&#39;, &#39;gray&#39;]</span>
            <span class="c1">##  rb = wx.RadioBox(self, label=&quot;What color would you like ?&quot;, pos=(20, 210), choices=radioList,  majorDimension=3,</span>
                        <span class="c1">##  style=wx.RA_SPECIFY_COLS)</span>
            <span class="c1">##  grid.Add(rb, pos=(5,0), span=(1,2))</span>
            <span class="c1">##  self.Bind(wx.EVT_RADIOBOX, self.EvtRadioBox, rb)</span>

            <span class="c1"># create the Lpanel</span>
            <span class="n">leftSizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">LeftPanel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MainPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGridGap</span> <span class="o">=</span> <span class="mi">80</span>
            <span class="n">gridSize</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">LPwidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">RGridGap</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGridInitSize</span> <span class="o">=</span> <span class="n">gridSize</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">LeftPanel</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="n">gridSize</span><span class="p">)</span>

            <span class="c1"># Define a dynamically updatable grid</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid_scrollwindow</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ScrolledWindow</span><span class="p">(</span><span class="nb">id</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">gridSize</span><span class="p">,</span>
                                                        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;RGrid_scrollwindow&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">LeftPanel</span><span class="p">,</span>
                                                        <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">HSCROLL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">VSCROLL</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">Grid</span><span class="p">(</span><span class="nb">id</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;RGrid&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">gridSize</span><span class="p">,</span>
                                      <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">RGrid_scrollwindow</span><span class="p">,</span>
                                      <span class="n">style</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGridCol</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">CreateGrid</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">reactions</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">RGridCol</span><span class="p">)</span>
            <span class="c1">#self.RGrid.SetSize(gridSize)</span>
            <span class="c1">#self.RGrid.SetMinSize(gridSize)</span>
            <span class="c1">##  self.RGrid.SetMargins(5,5)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">EnableScrolling</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">SetScrollbars</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">EVT_GRID_SELECT_CELL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EvtRGridCellSelect</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">EVT_GRID_CELL_CHANGE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EvtRGridCellChange</span><span class="p">)</span>

            <span class="c1"># Some buttons</span>
            <span class="n">buttonSizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>

            <span class="n">ButtonPanel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LeftPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1">#ButtonPanel.SetSize((20,30))</span>
            <span class="c1">#ButtonPanel.SetMinSize((20,30))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">BUT_optimise</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">ButtonPanel</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Optimize&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">BUT_minsum</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">ButtonPanel</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Min. SumAbsFlux&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EVT_BUT_optimise</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BUT_optimise</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EVT_BUT_minsum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BUT_minsum</span><span class="p">)</span>
            <span class="n">buttonSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BUT_optimise</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">CENTER</span><span class="p">)</span>
            <span class="n">buttonSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BUT_minsum</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">CENTER</span><span class="p">)</span>
            <span class="n">ButtonPanel</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="n">buttonSizer</span><span class="p">)</span>

            <span class="c1"># add status text controls</span>
            <span class="n">statusSizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">GridSizer</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">StatusPanel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LeftPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">LPwidth</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">STS_OBJ_FUNC_LBL</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">StatusPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_READONLY</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TE_CENTER</span><span class="p">)</span>
            <span class="n">STS_OBJ_FUNC_LBL</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;ObjValue&#39;</span><span class="p">)</span>
            <span class="n">STS_OBJ_FUNC_LBL</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">153</span><span class="p">))</span>
            <span class="n">statusSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">STS_OBJ_FUNC_LBL</span><span class="p">)</span>
            <span class="n">STS_OBJ_SENSE_LBL</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">StatusPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_READONLY</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TE_CENTER</span><span class="p">)</span>
            <span class="n">STS_OBJ_SENSE_LBL</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;ObjSense&#39;</span><span class="p">)</span>
            <span class="n">STS_OBJ_SENSE_LBL</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">153</span><span class="p">))</span>
            <span class="n">statusSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">STS_OBJ_SENSE_LBL</span><span class="p">)</span>
            <span class="n">STS_OBJ_COND_LBL</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">StatusPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_READONLY</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TE_CENTER</span><span class="p">)</span>
            <span class="n">STS_OBJ_COND_LBL</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;ObjStatus&#39;</span><span class="p">)</span>
            <span class="n">STS_OBJ_COND_LBL</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">153</span><span class="p">))</span>
            <span class="n">statusSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">STS_OBJ_COND_LBL</span><span class="p">)</span>

            <span class="n">SEARCH_OBJ_LBL</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">StatusPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_READONLY</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TE_CENTER</span><span class="p">)</span>
            <span class="n">SEARCH_OBJ_LBL</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;SearchReactions&#39;</span><span class="p">)</span>
            <span class="n">SEARCH_OBJ_LBL</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="mi">130</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">SEARCH_OBJ_LBL</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
            <span class="n">statusSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">SEARCH_OBJ_LBL</span><span class="p">)</span>

            <span class="c1">## the combobox Control</span>
            <span class="c1">#self.SEARCH_SELECT_COMB = wx.ComboBox(StatusPanel, size=wx.Size(130, -1), choices=[&#39;AutoComplete&#39;, &#39;SubString&#39;], style=wx.CB_READONLY)</span>
            <span class="c1">#self.SEARCH_SELECT_COMB.SetStringSelection(&#39;AutoComplete&#39;)</span>
            <span class="c1">#statusSizer.Add(self.SEARCH_SELECT_COMB)</span>
            <span class="c1">## self.Bind(wx.EVT_COMBOBOX, self.EvtComboBox, self.edithear)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_FUNC</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">StatusPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_READONLY</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TE_CENTER</span><span class="p">)</span>
            <span class="n">statusSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_FUNC</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_SENSE</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">StatusPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_READONLY</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TE_CENTER</span><span class="p">)</span>
            <span class="n">statusSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_SENSE</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_COND</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">StatusPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_READONLY</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TE_CENTER</span><span class="p">)</span>
            <span class="n">statusSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_COND</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">SearchSelectCallback</span><span class="p">(</span><span class="n">sList</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Selection list&#39;</span><span class="p">,</span> <span class="n">sList</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">UpdateReactionGraph</span><span class="p">(</span><span class="n">sList</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">updateInfoFromReactionName</span><span class="p">(</span><span class="n">sList</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SelectGridRow</span><span class="p">(</span><span class="n">sList</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>


            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_OBJ</span> <span class="o">=</span> <span class="n">TextCtrlAutoComplete</span><span class="p">(</span><span class="n">StatusPanel</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionIds</span><span class="p">(),</span>\
                                                       <span class="n">selectCallback</span><span class="o">=</span><span class="n">SearchSelectCallback</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_LEFT</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_OBJ</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="mi">130</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_OBJ</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_OBJ</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">StatusPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionIds</span><span class="p">(),</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_READONLY</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TE_CENTER</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_OBJ</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="mi">130</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_OBJ</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">statusSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SEARCH_OBJ</span><span class="p">)</span>
            <span class="n">StatusPanel</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="n">statusSizer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">StatusPanel</span> <span class="o">=</span> <span class="n">StatusPanel</span>

            <span class="n">leftSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">StatusPanel</span><span class="p">)</span>
            <span class="n">leftSizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">leftSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">ButtonPanel</span><span class="p">)</span>
            <span class="n">leftSizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">leftSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RGrid_scrollwindow</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">LeftPanel</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="n">leftSizer</span><span class="p">)</span>

            <span class="c1"># create the Rpanel notebook</span>
            <span class="n">rightSizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RightPanel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MainPanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">NoteB1size</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">RPwidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">RPheight</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Notebook</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RightPanel</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">NoteB1size</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">NoteB1size</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="n">NoteB1size</span><span class="p">)</span>
            <span class="c1">##  self.NoteB1.SetPadding((10,-1))</span>
            <span class="c1"># create panels</span>
            <span class="n">RinfSize</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="n">NoteB1size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="n">NoteB1size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">25</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Psession</span> <span class="o">=</span>  <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Preaction</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Pspecies</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Prelate</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Pgene</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1">#self.NoteB1_PRedit = wx.Panel(self.NoteB1, -1)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_PRedit</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">scrolledpanel</span><span class="o">.</span><span class="n">ScrolledPanel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TAB_TRAVERSAL</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">SUNKEN_BORDER</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">HSCROLL</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">VSCROLL</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_PRedit</span><span class="o">.</span><span class="n">SetAutoLayout</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_PRedit</span><span class="o">.</span><span class="n">SetupScrolling</span><span class="p">()</span>

            <span class="c1">#create pybox: python script window</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PyBox</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Psession</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">(),</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_MULTILINE</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">HSCROLL</span><span class="p">)</span>
            <span class="n">PyBox_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="n">PyBox_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PyBox</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">)</span>
            <span class="c1">#self.NoteB1_Psession.Fit(PyBox_sizer)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PyBox</span><span class="o">.</span><span class="n">SetEditable</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;#############################</span><span class="se">\n</span><span class="s2"># &quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;# PySCeS-CBM GUI generated command file &quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;# Please note that the model instance is: cmod &quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;#</span><span class="se">\n</span><span class="s2">#############################</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;import cbmpy</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;# cmod = cbmpy.CBRead.readSBML2FBA(ModelFile, ModelDir)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PyBox</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">())</span>

            <span class="c1"># create html panel for reaction information</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Rinfbox</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">HtmlWindow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Preaction</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">(),</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">HW_SCROLLBAR_AUTO</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Rinfbox</span><span class="o">.</span><span class="n">SetBorders</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">Rinfbox_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="n">Rinfbox_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Rinfbox</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Rinfbox</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">())</span>

            <span class="c1"># create reaction editor</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FontCache</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;SanSer12CS&#39;</span> <span class="p">:</span> <span class="n">wx</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">SWISS</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">NORMAL</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">NORMAL</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">u&#39;Comic Sans MS&#39;</span><span class="p">)})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FontCache</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;SanSer12&#39;</span> <span class="p">:</span> <span class="n">wx</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">SWISS</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">NORMAL</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">NORMAL</span><span class="p">,</span> <span class="kc">False</span><span class="p">)})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FontCache</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;SanSer10&#39;</span> <span class="p">:</span> <span class="n">wx</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">SWISS</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">NORMAL</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">NORMAL</span><span class="p">,</span> <span class="kc">False</span><span class="p">)})</span>

            <span class="c1"># create the box sizer</span>
            <span class="n">Reditbox_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>

            <span class="c1"># create the edit button</span>
            <span class="c1">#self.BUT_EnableEdit = wx.Button(self.NoteB1_PRedit, label=&quot;Edit Reaction&quot;)</span>
            <span class="c1">#self.Bind(wx.EVT_BUTTON, self.EVT_BUT_EnableEdit, self.BUT_EnableEdit)</span>
            <span class="c1">#Reditbox_sizer.Add(self.BUT_EnableEdit)</span>

            <span class="c1"># create the component grid</span>
            <span class="c1">#Reditgrid_sizer = wx.GridSizer(3,2,1,1)</span>
            <span class="c1">#grow = 10</span>
            <span class="c1">#gcol = 2</span>
            <span class="c1">#cntr = True</span>
            <span class="c1">#self.TEXTBOXES_Redit = []</span>
            <span class="c1">#for tp in range(grow*gcol):</span>
                <span class="c1">#cellHeight = -1</span>
                <span class="c1">#if cntr:</span>
                    <span class="c1">#tx = wx.TextCtrl(self.NoteB1_PRedit, style=wx.DEFAULT | wx.TE_READONLY | wx.TE_CENTER)</span>
                    <span class="c1">#tx.SetSize(wx.Size(RinfSize[1]/4, cellHeight))</span>
                    <span class="c1">#tx.SetMinSize(wx.Size(RinfSize[1]/4, cellHeight))</span>
                    <span class="c1">#tx.SetFont(self.FontCache[&#39;SanSer10&#39;])</span>
                    <span class="c1">#cntr = False</span>
                <span class="c1">#else:</span>
                    <span class="c1">#tx = wx.TextCtrl(self.NoteB1_PRedit, style=wx.DEFAULT | wx.TE_LEFT | wx.EXPAND )</span>
                    <span class="c1">#tx.SetSize(wx.Size(RinfSize[1]/2, cellHeight))</span>
                    <span class="c1">#tx.SetMinSize(wx.Size(RinfSize[1]/2, cellHeight))</span>
                    <span class="c1">#tx.SetFont(self.FontCache[&#39;SanSer10&#39;])</span>
                    <span class="c1">#cntr = True</span>
                <span class="c1">#tx.Disable()</span>
                <span class="c1">#tx.WriteText(str(tp+1))</span>
                <span class="c1">#tx.PID = str(tp+1)</span>
                <span class="c1">#Reditgrid_sizer.Add(tx, wx.EXPAND)</span>
                <span class="c1">#self.TEXTBOXES_Redit.append(tx)</span>
            <span class="c1">#Reditbox_sizer.Add(Reditgrid_sizer, wx.EXPAND) # add to boxsizer</span>

            <span class="c1"># create the annotate button</span>
            <span class="c1">#self.BUT_Annotate = wx.Button(self.NoteB1_PRedit, label=&quot;SemanticSBML&quot;)</span>
            <span class="c1">#self.Bind(wx.EVT_BUTTON, self.EVT_BUT_Annotate, self.BUT_Annotate)</span>
            <span class="c1">#Reditbox_sizer.Add(self.BUT_Annotate)</span>

            <span class="c1"># the big text box</span>
            <span class="c1">#self.TEXTBOX_Annotate = wx.TextCtrl(self.NoteB1_PRedit, style=wx.TE_MULTILINE | wx.EXPAND )</span>
            <span class="c1">#self.TEXTBOX_Annotate.SetMinSize(wx.Size(self.NoteB1.GetVirtualSize()[1], -1))</span>
            <span class="c1">#self.TEXTBOX_Annotate.SetFont(self.FontCache[&#39;SanSer10&#39;])</span>
            <span class="c1">#self.TEXTBOX_Annotate.Disable()</span>
            <span class="c1">#Reditbox_sizer.Add(self.TEXTBOX_Annotate, wx.EXPAND) # add to boxsizer</span>

            <span class="c1"># add boxSizer to Panel</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_PRedit</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="n">Reditbox_sizer</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">DEFAULT</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_PRedit</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">())</span>

            <span class="c1"># create html panel for reagent information</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sinfbox</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">ClickableHtmlWindow</span><span class="o">.</span><span class="n">PyClickableHtmlWindow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Pspecies</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">(),</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">HW_SCROLLBAR_AUTO</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sinfbox</span><span class="o">.</span><span class="n">SetBorders</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">Sinfbox_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="n">Sinfbox_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Sinfbox</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sinfbox</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">())</span>

            <span class="c1"># Create canvas panels for graphical representations</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">colourdb</span><span class="o">.</span><span class="n">updateColourDB</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">WX_COLOURS</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">colourdb</span><span class="o">.</span><span class="n">getColourList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FC_LineStyles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">FloatCanvas</span><span class="o">.</span><span class="n">DrawObject</span><span class="o">.</span><span class="n">LineStyleList</span><span class="p">)</span>

            <span class="c1"># create a met/gen canvas and do voodoo to get it to fill the notebook panel</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MetCanvas</span> <span class="o">=</span> <span class="n">NavCanvas</span><span class="o">.</span><span class="n">NavCanvas</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Prelate</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">(),</span> <span class="n">Debug</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ProjectionFun</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">BackgroundColor</span><span class="o">=</span><span class="s2">&quot;DARK SLATE BLUE&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MetCanvas</span><span class="o">.</span><span class="n">Canvas</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span><span class="o">.</span><span class="n">SetProjectionFun</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span><span class="o">.</span><span class="n">InitAll</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GenCanvas</span> <span class="o">=</span> <span class="n">NavCanvas</span><span class="o">.</span><span class="n">NavCanvas</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Pgene</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">(),</span> <span class="n">Debug</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ProjectionFun</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">BackgroundColor</span><span class="o">=</span><span class="s2">&quot;DARK SLATE BLUE&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_gen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GenCanvas</span><span class="o">.</span><span class="n">Canvas</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_gen</span><span class="o">.</span><span class="n">SetProjectionFun</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_gen</span><span class="o">.</span><span class="n">InitAll</span><span class="p">()</span>

            <span class="n">NC1_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="n">NC1_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MetCanvas</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">)</span>
            <span class="n">NC2_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="n">NC2_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GenCanvas</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_gen</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">())</span>

            <span class="c1">##  self.FCanvas_met.Bind(FloatCanvas.EVT_LEFT_DOWN, self.EVT_FC1_onClick)</span>
            <span class="c1">##  self.FCanvas_gen.Bind(FloatCanvas.EVT_LEFT_DOWN, self.EVT_FC2_onClick)</span>

            <span class="c1"># add the pages to the notebook with the label to show on the tab</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">AddPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Psession</span><span class="p">,</span> <span class="s2">&quot;Session&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">AddPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Preaction</span><span class="p">,</span> <span class="s2">&quot;Reaction&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">AddPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Prelate</span><span class="p">,</span> <span class="s2">&quot;Metabolism&quot;</span><span class="p">)</span>
            <span class="c1"># TODO</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">AddPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Pgene</span><span class="p">,</span> <span class="s2">&quot;Genes&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">AddPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_PRedit</span><span class="p">,</span> <span class="s2">&quot;ReacEdt&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">AddPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1_Pspecies</span><span class="p">,</span> <span class="s2">&quot;MIRIAM&quot;</span><span class="p">)</span>

            <span class="n">rightSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="p">)</span>
            <span class="c1">#self.RightPanel.Fit(rightSizer)</span>

            <span class="c1"># Add components to the main panel</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">mainSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LeftPanel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mainSizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RightPanel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MainPanel</span><span class="o">.</span><span class="n">SetSizerAndFit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainSizer</span><span class="p">)</span>

            <span class="c1">## Resize control</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_SIZE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EVT_FRAME_resize</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

            <span class="c1">##GENERIC click event</span>
            <span class="c1">#self.Bind(wx.EVT_SIZE, self.EVT_onClick, self.MainPanel)</span>

        <span class="k">def</span> <span class="nf">UpdateModelStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_SENSE</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_COND</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_FUNC</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_COND</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">SOLUTION_STATUS</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">SOLUTION_STATUS</span> <span class="o">==</span> <span class="s1">&#39;LPS_OPT&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_COND</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_COND</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">51</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getActiveObjective</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_FUNC</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getActiveObjective</span><span class="p">()</span><span class="o">.</span><span class="n">getValue</span><span class="p">()))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_SENSE</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getActiveObjective</span><span class="p">()</span><span class="o">.</span><span class="n">operation</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_FUNC</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">STS_OBJ_SENSE</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">UpdateReactionInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rid</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Updating reaction info&#39;</span><span class="p">)</span>
            <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReaction</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span>

            <span class="n">rs</span> <span class="o">=</span> <span class="s1">&#39;&lt;h2&gt;</span><span class="si">%s</span><span class="s1">&lt;/h2&gt;&lt;p&gt;</span><span class="si">%s</span><span class="s1">&lt;/p&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
            <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Equation&lt;/h3&gt;&lt;p&gt;</span><span class="si">%s</span><span class="s1">&lt;/p&gt;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetEquation</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
            <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;&#39;</span>
            <span class="c1">##  rs += &#39;&lt;h3&gt;Details&lt;/h3&gt;&#39;</span>
            <span class="n">props</span> <span class="o">=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;&lt;strong&gt;Properties&lt;/strong&gt;&lt;/th&gt;&lt;/tr&gt;&#39;</span>
            <span class="n">props</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Reversible&#39;</span><span class="p">,</span><span class="n">r</span><span class="o">.</span><span class="n">reversible</span><span class="p">,</span><span class="s1">&#39;Exchange&#39;</span><span class="p">,</span><span class="n">r</span><span class="o">.</span><span class="n">is_exchange</span><span class="p">)</span>
            <span class="n">props</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;&lt;strong&gt;Annotations&lt;/strong&gt;&lt;/th&gt;&lt;/tr&gt;&#39;</span>
            <span class="n">RA</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">getAnnotations</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">RA</span><span class="p">:</span>
                <span class="n">props</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">RA</span><span class="p">[</span><span class="n">a</span><span class="p">])</span>
            <span class="c1">##  rs += &#39;&lt;table border=&quot;1&quot; cellpadding=&quot;5&quot; width=&quot;70%s&quot;&gt;%s&lt;/table&gt;&#39; % (&#39;\\%&#39;, props)</span>
            <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table border=&quot;1&quot; cellpadding=&quot;5&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/table&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">props</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ReactionBalanceInfo</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">rid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ReactionBalanceInfo</span><span class="p">:</span>
                    <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Balancing information&lt;/h3&gt;&#39;</span>
                    <span class="n">bi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ReactionBalanceInfo</span><span class="p">[</span><span class="n">rid</span><span class="p">]</span>
                    <span class="c1">#print bi</span>
                    <span class="n">bal</span> <span class="o">=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td colspan=&quot;2&quot;&gt;Charge balanced: </span><span class="si">%s</span><span class="s1"> {</span><span class="se">\&#39;</span><span class="s1">charge</span><span class="se">\&#39;</span><span class="s1">, </span><span class="si">%s</span><span class="s1">}&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bi</span><span class="p">[</span><span class="s1">&#39;charge_balanced&#39;</span><span class="p">],</span> <span class="n">bi</span><span class="p">[</span><span class="s1">&#39;charge&#39;</span><span class="p">])</span>
                    <span class="n">bal</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td colspan=&quot;2&quot;&gt;Element balanced: </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bi</span><span class="p">[</span><span class="s1">&#39;element_balanced&#39;</span><span class="p">],</span> <span class="n">bi</span><span class="p">[</span><span class="s1">&#39;elements&#39;</span><span class="p">])</span>
                    <span class="k">for</span> <span class="n">rre</span> <span class="ow">in</span> <span class="n">bi</span><span class="p">[</span><span class="s1">&#39;stuff&#39;</span><span class="p">]:</span>
                        <span class="n">sbal</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                        <span class="n">coeff</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">for</span> <span class="n">det</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rre</span><span class="p">)):</span>
                            <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                            <span class="k">if</span> <span class="n">det</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">out</span> <span class="o">=</span> <span class="n">rre</span><span class="p">[</span><span class="n">det</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">det</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                                <span class="n">coeff</span> <span class="o">=</span> <span class="n">rre</span><span class="p">[</span><span class="n">det</span><span class="p">]</span>
                                <span class="c1">#out = re[det]</span>
                            <span class="k">elif</span> <span class="n">det</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                                <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                                <span class="k">if</span> <span class="n">rre</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">or</span> <span class="n">rre</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;Unknown&#39;</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">rre</span><span class="p">[</span><span class="n">det</span><span class="p">]:</span>
                                        <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1"> </span><span class="si">%s</span><span class="s1">, &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">coeff</span><span class="o">*</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                                    <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">out</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                                <span class="n">sbal</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">out</span>
                        <span class="n">bal</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;</span><span class="si">%s</span><span class="s1">&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sbal</span><span class="p">)</span>
                    <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table border=&quot;1&quot; cellpadding=&quot;5&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/table&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bal</span><span class="p">)</span>
            <span class="n">props</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Reagents&lt;/h3&gt;&#39;</span>
            <span class="k">for</span> <span class="n">sid</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">getSpeciesIds</span><span class="p">():</span>
                <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getSpecies</span><span class="p">(</span><span class="n">sid</span><span class="p">)</span>
                <span class="n">props</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h4&gt;</span><span class="si">%s</span><span class="s1">&lt;/h4&gt;&lt;table border=&quot;1&quot; cellpadding=&quot;5&quot;&gt;&#39;</span> <span class="o">%</span> <span class="n">sid</span>
                <span class="c1">##  props += &#39;&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;&lt;strong&gt;%s&lt;/strong&gt;&lt;/th&gt;&lt;/tr&gt;&#39; % sid</span>
                <span class="n">props</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span><span class="s1">&#39;Compartment&#39;</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">compartment</span><span class="p">)</span>
                <span class="n">props</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Fixed&#39;</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">is_boundary</span><span class="p">)</span>
                <span class="n">props</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Coefficient&#39;</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">getReagentWithSpeciesRef</span><span class="p">(</span><span class="n">sid</span><span class="p">)</span><span class="o">.</span><span class="n">coefficient</span><span class="p">)</span>
                <span class="c1">##  props += &#39;&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;Annotations&lt;/th&gt;&lt;/tr&gt;&#39;</span>
                <span class="n">props</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;ChemFormula&#39;</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">chemFormula</span><span class="p">,</span><span class="s1">&#39;Charge&#39;</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">charge</span><span class="p">)</span>
                <span class="c1">##  SA = s.getAnnotations()</span>
                <span class="c1">##  for a in RA:</span>
                    <span class="c1">##  props += &#39;&lt;tr&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;&#39; % (a, SA[a])</span>
                <span class="c1">##  rs += &#39;&lt;table border=&quot;1&quot; cellpadding=&quot;5&quot; width=&quot;70%s&quot;&gt;%s&lt;/table&gt;&#39; % (&#39;\\%&#39;, props)</span>
                <span class="n">props</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;&#39;</span>
            <span class="n">rs</span> <span class="o">+=</span> <span class="n">props</span>
                <span class="c1">##  rs += &#39;&lt;table border=&quot;1&quot; cellpadding=&quot;3&quot; width=&quot;80%s&quot;&gt;&lt;tr&gt;&lt;th&gt;Property&lt;/th&gt;&lt;th&gt;Value&lt;/th&gt;&lt;/tr&gt;%s&lt;/table&gt;&#39; % (&#39;\\%&#39;, props)</span>


            <span class="bp">self</span><span class="o">.</span><span class="n">Rinfbox</span><span class="o">.</span><span class="n">SetPage</span><span class="p">(</span><span class="s2">&quot;&lt;html&gt;&lt;body&gt;</span><span class="si">%s</span><span class="s2">&lt;/body&gt;&lt;/html&gt;&quot;</span> <span class="o">%</span> <span class="n">rs</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">SelectGridRow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">SelectRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RGridRow</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">rid</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">MakeCellVisible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RGridRow</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">rid</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">UpdateReactionGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">):</span>
            <span class="n">R</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReaction</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span>
            <span class="n">subs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">prods</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span><span class="o">.</span><span class="n">ClearAll</span><span class="p">()</span>
            <span class="n">STB_LW</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="n">STB_PAD</span> <span class="o">=</span> <span class="mf">0.15</span>
            <span class="n">STB_SZ</span> <span class="o">=</span> <span class="mf">0.25</span>
            <span class="n">STB_LC</span> <span class="o">=</span> <span class="s1">&#39;Black&#39;</span>
            <span class="n">GC</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

            <span class="n">FC_OBJ</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">rid</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">RGdict</span><span class="p">:</span>
                <span class="n">STB</span> <span class="o">=</span> <span class="n">FloatCanvas</span><span class="o">.</span><span class="n">ScaledTextBox</span><span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">GC</span><span class="p">,</span> <span class="n">Size</span><span class="o">=</span><span class="n">STB_SZ</span><span class="p">,</span> <span class="n">PadSize</span><span class="o">=</span><span class="n">STB_PAD</span><span class="p">,</span>\
                                                <span class="n">LineWidth</span><span class="o">=</span><span class="n">STB_LW</span><span class="p">,</span> <span class="n">LineColor</span><span class="o">=</span><span class="n">STB_LC</span><span class="p">,</span>\
                                                <span class="n">Family</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">FONTFAMILY_DEFAULT</span><span class="p">,</span> <span class="n">Weight</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">BOLD</span><span class="p">,</span>\
                                                <span class="n">BackgroundColor</span><span class="o">=</span><span class="s1">&#39;White&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__STB_center__</span><span class="p">(</span><span class="n">STB</span><span class="p">)</span>
                <span class="n">STB</span><span class="o">.</span><span class="n">Name</span> <span class="o">=</span> <span class="n">rid</span>
                <span class="n">STB</span><span class="o">.</span><span class="n">HitFill</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">STB</span><span class="o">.</span><span class="n">HitLineWidth</span> <span class="o">=</span> <span class="mi">5</span>
                <span class="n">FC_OBJ</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">STB</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">rr</span> <span class="ow">in</span> <span class="n">R</span><span class="o">.</span><span class="n">reagents</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rr</span><span class="o">.</span><span class="n">coefficient</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rr</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">rr</span><span class="o">.</span><span class="n">coefficient</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">prods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rr</span><span class="p">)</span>
                <span class="n">radius</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">reagents</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">radius</span> <span class="o">=</span> <span class="mi">2</span>
                    <span class="n">cxy</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="n">radius</span><span class="p">)]</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">reagents</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">radius</span> <span class="o">=</span> <span class="mi">2</span>
                    <span class="n">cxy</span> <span class="o">=</span> <span class="n">circlePoints</span><span class="p">(</span><span class="n">totalPoints</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">reagents</span><span class="p">),</span> <span class="n">startAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">arc</span><span class="o">=</span><span class="mi">360</span><span class="p">,</span> <span class="n">circleradius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">centerxy</span><span class="o">=</span><span class="n">GC</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;forward&#39;</span><span class="p">,</span> <span class="n">evenDistribution</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">reagents</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">12</span><span class="p">:</span>
                        <span class="n">radius</span> <span class="o">=</span> <span class="mi">3</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">radius</span> <span class="o">=</span> <span class="mi">10</span>
                    <span class="n">cxy</span> <span class="o">=</span> <span class="n">circlePoints</span><span class="p">(</span><span class="n">totalPoints</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">reagents</span><span class="p">),</span> <span class="n">startAngle</span><span class="o">=</span><span class="mi">270</span><span class="p">,</span> <span class="n">arc</span><span class="o">=</span><span class="mi">360</span><span class="p">,</span> <span class="n">circleradius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">centerxy</span><span class="o">=</span><span class="n">GC</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;forward&#39;</span><span class="p">,</span> <span class="n">evenDistribution</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

                <span class="n">scntr</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">rcntr</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getSpecies</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">species_ref</span><span class="p">)</span><span class="o">.</span><span class="n">is_boundary</span><span class="p">:</span>
                        <span class="n">STB_LC</span> <span class="o">=</span> <span class="s1">&#39;Red&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">STB_LC</span> <span class="o">=</span> <span class="s1">&#39;Black&#39;</span>
                    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">coefficient</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">cf</span> <span class="o">=</span> <span class="s1">&#39;{</span><span class="si">%.1f</span><span class="s1">} &#39;</span> <span class="o">%</span> <span class="nb">abs</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">coefficient</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">cf</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                    <span class="n">STB</span> <span class="o">=</span> <span class="n">FloatCanvas</span><span class="o">.</span><span class="n">ScaledTextBox</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cf</span><span class="p">,</span><span class="n">subs</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">species_ref</span><span class="p">),</span> <span class="n">cxy</span><span class="p">[</span><span class="n">rcntr</span><span class="p">],</span> <span class="n">Size</span><span class="o">=</span><span class="n">STB_SZ</span><span class="p">,</span> <span class="n">PadSize</span><span class="o">=</span><span class="n">STB_PAD</span><span class="p">,</span> <span class="n">LineWidth</span><span class="o">=</span><span class="n">STB_LW</span><span class="p">,</span> <span class="n">LineColor</span><span class="o">=</span><span class="n">STB_LC</span><span class="p">,</span> <span class="n">Family</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">SWISS</span><span class="p">,</span> <span class="n">BackgroundColor</span><span class="o">=</span><span class="s1">&#39;Green&#39;</span><span class="p">)</span>
                    <span class="n">STB</span><span class="o">.</span><span class="n">Name</span> <span class="o">=</span> <span class="n">subs</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">species_ref</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__STB_center__</span><span class="p">(</span><span class="n">STB</span><span class="p">)</span>
                    <span class="n">STB</span><span class="o">.</span><span class="n">HitFill</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">STB</span><span class="o">.</span><span class="n">HitLineWidth</span> <span class="o">=</span> <span class="mi">5</span>
                    <span class="n">FC_OBJ</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">STB</span><span class="p">)</span>
                    <span class="n">scntr</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">rcntr</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">pcntr</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prods</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getSpecies</span><span class="p">(</span><span class="n">prods</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">.</span><span class="n">species_ref</span><span class="p">)</span><span class="o">.</span><span class="n">is_boundary</span><span class="p">:</span>
                        <span class="n">STB_LC</span> <span class="o">=</span> <span class="s1">&#39;Red&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">STB_LC</span> <span class="o">=</span> <span class="s1">&#39;Black&#39;</span>
                    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">prods</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">.</span><span class="n">coefficient</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">cf</span> <span class="o">=</span> <span class="s1">&#39;{</span><span class="si">%.1f</span><span class="s1">} &#39;</span> <span class="o">%</span> <span class="nb">abs</span><span class="p">(</span><span class="n">prods</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">.</span><span class="n">coefficient</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">cf</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                    <span class="n">STB</span> <span class="o">=</span> <span class="n">FloatCanvas</span><span class="o">.</span><span class="n">ScaledTextBox</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cf</span><span class="p">,</span> <span class="n">prods</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">.</span><span class="n">species_ref</span><span class="p">),</span> <span class="n">cxy</span><span class="p">[</span><span class="n">rcntr</span><span class="p">],</span> <span class="n">Size</span><span class="o">=</span><span class="n">STB_SZ</span><span class="p">,</span> <span class="n">PadSize</span><span class="o">=</span><span class="n">STB_PAD</span><span class="p">,</span> <span class="n">LineWidth</span><span class="o">=</span><span class="n">STB_LW</span><span class="p">,</span> <span class="n">LineColor</span><span class="o">=</span><span class="n">STB_LC</span><span class="p">,</span> <span class="n">Family</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">SWISS</span><span class="p">,</span> <span class="n">BackgroundColor</span><span class="o">=</span><span class="s1">&#39;Yellow&#39;</span><span class="p">)</span>
                    <span class="n">STB</span><span class="o">.</span><span class="n">Name</span> <span class="o">=</span> <span class="n">prods</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">.</span><span class="n">species_ref</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__STB_center__</span><span class="p">(</span><span class="n">STB</span><span class="p">)</span>
                    <span class="n">STB</span><span class="o">.</span><span class="n">HitFill</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">STB</span><span class="o">.</span><span class="n">HitLineWidth</span> <span class="o">=</span> <span class="mi">5</span>
                    <span class="n">FC_OBJ</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">STB</span><span class="p">)</span>
                    <span class="n">pcntr</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">rcntr</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">RGdict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">rid</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;obj&#39;</span> <span class="p">:</span> <span class="n">FC_OBJ</span><span class="p">}})</span>
                <span class="c1">##  print &#39;Drawing from scratch&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">##  print &#39;Using cached graph&#39;</span>
                <span class="n">FC_OBJ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">RGdict</span><span class="p">[</span><span class="n">rid</span><span class="p">][</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span><span class="o">.</span><span class="n">AddObjects</span><span class="p">(</span><span class="n">FC_OBJ</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">FC_OBJ</span><span class="p">:</span>
                <span class="n">o</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">FloatCanvas</span><span class="o">.</span><span class="n">EVT_FC_LEFT_DOWN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">HIT_STB_onClick</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span><span class="o">.</span><span class="n">ZoomToBB</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">__STB_center__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stb</span><span class="p">):</span>
            <span class="n">box</span> <span class="o">=</span> <span class="n">stb</span><span class="o">.</span><span class="n">GetBoxRect</span><span class="p">()</span>
            <span class="n">stb</span><span class="o">.</span><span class="n">SetPoint</span><span class="p">(</span> <span class="p">(</span> <span class="n">box</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">box</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">return</span> <span class="n">stb</span><span class="o">.</span><span class="n">GetBoxRect</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">UpdateSpeciesGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sid</span><span class="p">):</span>
            <span class="c1">#print sid, self.Smap[sid]</span>
            <span class="n">STB_LW</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="n">STB_PAD</span> <span class="o">=</span> <span class="mf">0.15</span>
            <span class="n">STB_SZ</span> <span class="o">=</span> <span class="mf">0.25</span>
            <span class="n">STB_LC</span> <span class="o">=</span> <span class="s1">&#39;Black&#39;</span>
            <span class="n">GC</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">radius</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">rList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Smap</span><span class="p">[</span><span class="n">sid</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnlyActiveReactions</span><span class="p">:</span>
                <span class="n">rList</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Smap</span><span class="p">[</span><span class="n">sid</span><span class="p">]</span> <span class="k">if</span> <span class="nb">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReaction</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">()),</span><span class="mi">6</span><span class="p">)</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span><span class="o">.</span><span class="n">ClearAll</span><span class="p">()</span>
            <span class="n">FC_OBJ</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">sid</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">SGdict</span><span class="p">:</span>
                <span class="n">orphan</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ReactionList&#39;</span><span class="p">,</span> <span class="n">rList</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">radius</span> <span class="o">=</span> <span class="mi">2</span>
                    <span class="n">cxz</span> <span class="o">=</span> <span class="n">GC</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">rList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">radius</span> <span class="o">=</span> <span class="mi">2</span>
                    <span class="n">cxy</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="n">radius</span><span class="p">)]</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">rList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">radius</span> <span class="o">=</span> <span class="mi">2</span>
                    <span class="n">cxy</span> <span class="o">=</span> <span class="n">circlePoints</span><span class="p">(</span><span class="n">totalPoints</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">rList</span><span class="p">),</span> <span class="n">startAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">arc</span><span class="o">=</span><span class="mi">360</span><span class="p">,</span> <span class="n">circleradius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">centerxy</span><span class="o">=</span><span class="n">GC</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;forward&#39;</span><span class="p">,</span> <span class="n">evenDistribution</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rList</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">12</span><span class="p">:</span>
                        <span class="n">radius</span> <span class="o">=</span> <span class="mi">3</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">rList</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">24</span><span class="p">:</span>
                        <span class="n">radius</span> <span class="o">=</span> <span class="mi">6</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">rList</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">36</span><span class="p">:</span>
                        <span class="n">radius</span> <span class="o">=</span> <span class="mi">9</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">radius</span> <span class="o">=</span> <span class="mi">15</span>
                    <span class="n">cxy</span> <span class="o">=</span> <span class="n">circlePoints</span><span class="p">(</span><span class="n">totalPoints</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">rList</span><span class="p">),</span> <span class="n">startAngle</span><span class="o">=</span><span class="mi">270</span><span class="p">,</span> <span class="n">arc</span><span class="o">=</span><span class="mi">360</span><span class="p">,</span> <span class="n">circleradius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">centerxy</span><span class="o">=</span><span class="n">GC</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;forward&#39;</span><span class="p">,</span> <span class="n">evenDistribution</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">cxy</span><span class="p">)</span>

                <span class="n">STB</span> <span class="o">=</span> <span class="n">FloatCanvas</span><span class="o">.</span><span class="n">ScaledTextBox</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">GC</span><span class="p">,</span> <span class="n">Size</span><span class="o">=</span><span class="n">STB_SZ</span><span class="p">,</span> <span class="n">PadSize</span><span class="o">=</span><span class="n">STB_PAD</span><span class="p">,</span> <span class="n">LineWidth</span><span class="o">=</span><span class="n">STB_LW</span><span class="p">,</span> <span class="n">LineColor</span><span class="o">=</span><span class="n">STB_LC</span><span class="p">,</span> <span class="n">Family</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">NORMAL</span><span class="p">,</span> <span class="n">Weight</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">BOLD</span><span class="p">,</span> <span class="n">BackgroundColor</span><span class="o">=</span><span class="s1">&#39;White&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__STB_center__</span><span class="p">(</span><span class="n">STB</span><span class="p">)</span>
                <span class="n">STB</span><span class="o">.</span><span class="n">Name</span> <span class="o">=</span> <span class="n">sid</span>
                <span class="n">STB</span><span class="o">.</span><span class="n">HitFill</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">STB</span><span class="o">.</span><span class="n">HitLineWidth</span> <span class="o">=</span> <span class="mi">5</span>
                <span class="n">FC_OBJ</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">STB</span><span class="p">)</span>

                <span class="n">rcntr</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">R</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rList</span><span class="p">)):</span>
                    <span class="n">cf</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                    <span class="n">STB</span> <span class="o">=</span> <span class="n">FloatCanvas</span><span class="o">.</span><span class="n">ScaledTextBox</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cf</span><span class="p">,</span> <span class="n">rList</span><span class="p">[</span><span class="n">R</span><span class="p">]),</span> <span class="n">cxy</span><span class="p">[</span><span class="n">R</span><span class="p">],</span> <span class="n">Size</span><span class="o">=</span><span class="n">STB_SZ</span><span class="p">,</span> <span class="n">PadSize</span><span class="o">=</span><span class="n">STB_PAD</span><span class="p">,</span> <span class="n">LineWidth</span><span class="o">=</span><span class="n">STB_LW</span><span class="p">,</span> <span class="n">LineColor</span><span class="o">=</span><span class="n">STB_LC</span><span class="p">,</span> <span class="n">Family</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">SWISS</span><span class="p">,</span> <span class="n">BackgroundColor</span><span class="o">=</span><span class="s1">&#39;Yellow&#39;</span><span class="p">)</span>
                    <span class="n">STB</span><span class="o">.</span><span class="n">Name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Smap</span><span class="p">[</span><span class="n">sid</span><span class="p">][</span><span class="n">R</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__STB_center__</span><span class="p">(</span><span class="n">STB</span><span class="p">)</span>
                    <span class="n">STB</span><span class="o">.</span><span class="n">HitFill</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">STB</span><span class="o">.</span><span class="n">HitLineWidth</span> <span class="o">=</span> <span class="mi">5</span>
                    <span class="n">FC_OBJ</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">STB</span><span class="p">)</span>
                    <span class="n">rcntr</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SGdict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">sid</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;obj&#39;</span> <span class="p">:</span> <span class="n">FC_OBJ</span><span class="p">}})</span>
                <span class="c1">##  print &#39;Drawing from scratch&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">##  print &#39;Using cached graph&#39;</span>
                <span class="n">FC_OBJ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SGdict</span><span class="p">[</span><span class="n">sid</span><span class="p">][</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span><span class="o">.</span><span class="n">AddObjects</span><span class="p">(</span><span class="n">FC_OBJ</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">FC_OBJ</span><span class="p">:</span>
                <span class="n">o</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">FloatCanvas</span><span class="o">.</span><span class="n">EVT_FC_LEFT_DOWN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">HIT_STB_onClick</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FCanvas_met</span><span class="o">.</span><span class="n">ZoomToBB</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">CreateMaps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">S</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">species</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Smap</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">S</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span> <span class="p">:</span> <span class="n">S</span><span class="o">.</span><span class="n">isReagentOf</span><span class="p">()})</span>
            <span class="k">for</span> <span class="n">R</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">reactions</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Rmap</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">R</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span> <span class="p">:</span> <span class="n">R</span><span class="o">.</span><span class="n">getSpeciesIds</span><span class="p">()})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GPRmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getAllGeneProteinAssociations</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PRGmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getAllProteinGeneAssociations</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">GetEquation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
            <span class="n">sub</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">prod</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">R</span><span class="o">.</span><span class="n">reagents</span><span class="p">:</span>
                <span class="n">coeff</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">coefficient</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s1">&#39;substrate&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">coeff</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">:</span>
                        <span class="n">sub</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> + &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">species_ref</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">sub</span> <span class="o">+=</span> <span class="s1">&#39;{</span><span class="si">%s</span><span class="s1">} </span><span class="si">%s</span><span class="s1"> + &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">coeff</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">species_ref</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">coeff</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">:</span>
                        <span class="n">prod</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> + &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">species_ref</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">prod</span> <span class="o">+=</span> <span class="s1">&#39;{</span><span class="si">%s</span><span class="s1">} </span><span class="si">%s</span><span class="s1"> + &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">coeff</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">species_ref</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">R</span><span class="o">.</span><span class="n">reversible</span><span class="p">:</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sub</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="n">prod</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> &gt; </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sub</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="n">prod</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">eq</span>

        <span class="k">def</span> <span class="nf">CreateRGrid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">RGridCol</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">labels != #col&#39;</span>
            <span class="n">grid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span>
            <span class="n">reactions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">reactions</span>
            <span class="n">fluxObjs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getActiveObjective</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fluxObjs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getActiveObjective</span><span class="p">()</span><span class="o">.</span><span class="n">getFluxObjectiveReactions</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RGridCol</span><span class="p">):</span>
                <span class="n">grid</span><span class="o">.</span><span class="n">SetColLabelValue</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">reactions</span><span class="p">)):</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RGridCol</span><span class="p">):</span>
                    <span class="c1">##  print r,c</span>
                    <span class="c1">##  print reactions[r].getId()</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;LB&#39;</span><span class="p">:</span>
                        <span class="c1">##  grid.SetColFormatFloat(c, 10, 3)</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionLowerBound</span><span class="p">(</span><span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">getId</span><span class="p">()))</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;UB&#39;</span><span class="p">:</span>
                        <span class="c1">##  grid.SetColFormatFloat(c, 10, 3)</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionUpperBound</span><span class="p">(</span><span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">getId</span><span class="p">()))</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="s1">&#39;   &#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Balanced&#39;</span><span class="p">:</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetReadOnly</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
                        <span class="n">txt</span> <span class="o">=</span> <span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">is_balanced</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;  </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span> <span class="p">)</span>
                        <span class="k">if</span> <span class="n">txt</span><span class="p">:</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">193</span><span class="p">,</span><span class="mi">96</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Flux&#39;</span><span class="p">:</span>
                        <span class="n">Rval</span> <span class="o">=</span> <span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">Rval</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">Rval</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">Rval</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">Rval</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;  </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">Rval</span><span class="p">)</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetReadOnly</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
                        <span class="c1"># colour by sign</span>
                        <span class="k">if</span> <span class="n">Rval</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">Rval</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">or</span> <span class="n">Rval</span> <span class="o">==</span> <span class="s1">&#39;None&#39;</span> <span class="ow">or</span> <span class="n">Rval</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="n">Rval</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">204</span><span class="p">,</span><span class="mi">204</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="n">Rval</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">153</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">153</span><span class="p">))</span>
                        <span class="c1"># boundary detection</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Exch&#39;</span><span class="p">:</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetReadOnly</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">is_exchange</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;RCost&#39;</span><span class="p">:</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetReadOnly</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ScaledReducedCost</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">reduced_cost</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">rcval</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%2.3e</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">reduced_cost</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">rcval</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">rcval</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Reaction&#39;</span><span class="p">:</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">198</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">getId</span><span class="p">()))</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetReadOnly</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Name&#39;</span><span class="p">:</span>
                        <span class="c1">##  grid.SetCellBackgroundColour(r,c,wx.Colour(255,255,153))</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">getName</span><span class="p">()))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span> <span class="ow">in</span> <span class="n">fluxObjs</span><span class="p">:</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">153</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RGridCol</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">):</span>
                    <span class="n">grid</span><span class="o">.</span><span class="n">AutoSizeColumn</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">grid</span><span class="o">.</span><span class="n">SetColMinimalWidth</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">UpdateRGridData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Updates Rgrid numeric data</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">grid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span>
            <span class="n">reactions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">reactions</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getActiveObjective</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fluxObjs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getActiveObjective</span><span class="p">()</span><span class="o">.</span><span class="n">getFluxObjectiveReactions</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fluxObjs</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">reactions</span><span class="p">)):</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RGridCol</span><span class="p">):</span>
    <span class="c1">##                 if self.rlabels[c] == &#39;LB&#39;:</span>
    <span class="c1">##                     grid.SetCellValue(r, c, &#39;%s&#39; % self._cmod_.getFluxBoundByReactionID(reactions[r].getId(), &#39;lower&#39;).getValue())</span>
    <span class="c1">##                 elif self.rlabels[c] == &#39;UB&#39;:</span>
    <span class="c1">##                     grid.SetCellValue(r, c, &#39;%s&#39; % self._cmod_.getFluxBoundByReactionID(reactions[r].getId(), &#39;upper&#39;).getValue())</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Flux&#39;</span><span class="p">:</span>
                        <span class="n">Rval</span> <span class="o">=</span> <span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">Rval_curr</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">GetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">Rval_curr</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">if</span> <span class="n">Rval</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">Rval</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">Rval</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">Rval</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;  </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">Rval</span><span class="p">)</span>
                        <span class="c1"># colour delta</span>
                        <span class="n">D_col_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">Rval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">NOVAL</span> <span class="ow">or</span> <span class="n">Rval_curr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">NOVAL</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="n">Rval</span> <span class="o">-</span> <span class="n">Rval_curr</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_TOL</span><span class="p">:</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">D_col_idx</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span><span class="p">)</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellTextColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">D_col_idx</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">Rval</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">Rval_curr</span><span class="p">,</span><span class="mi">10</span><span class="p">)):</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">D_col_idx</span><span class="p">,</span> <span class="s1">&#39; \/ &#39;</span><span class="p">)</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellTextColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">D_col_idx</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">Rval</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">Rval_curr</span><span class="p">,</span><span class="mi">10</span><span class="p">)):</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">D_col_idx</span><span class="p">,</span> <span class="s1">&#39; /\ &#39;</span><span class="p">)</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellTextColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">D_col_idx</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">204</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
                        <span class="c1"># colour by sign J</span>
                        <span class="k">if</span> <span class="n">Rval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">NOVAL</span> <span class="ow">or</span> <span class="n">Rval</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="n">Rval</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">204</span><span class="p">,</span><span class="mi">204</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="n">Rval</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">153</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">153</span><span class="p">))</span>

                        <span class="c1"># boundary detection</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__BoundaryDetection</span><span class="p">:</span>
                            <span class="n">LB</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionLowerBound</span><span class="p">(</span><span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">getId</span><span class="p">())</span>
                            <span class="n">UB</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionUpperBound</span><span class="p">(</span><span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">getId</span><span class="p">())</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">Rval</span> <span class="o">-</span> <span class="nb">round</span><span class="p">(</span><span class="n">LB</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_TOL</span><span class="p">:</span>
                                    <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;LB&#39;</span><span class="p">),</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">204</span><span class="p">,</span><span class="mi">204</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;LB&#39;</span><span class="p">),</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;INFO: LowerBound detector failed&#39;</span><span class="p">)</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">Rval</span> <span class="o">-</span> <span class="nb">round</span><span class="p">(</span><span class="n">UB</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_TOL</span><span class="p">:</span>
                                    <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;UB&#39;</span><span class="p">),</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">153</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">153</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;UB&#39;</span><span class="p">),</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;INFO: UpperBound detector failed&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;RCost&#39;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ScaledReducedCost</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">reduced_cost</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">rcval</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%2.3e</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">reduced_cost</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">rcval</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">rcval</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Balanced&#39;</span><span class="p">:</span>
                        <span class="n">bval</span> <span class="o">=</span> <span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">is_balanced</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">bval</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">bval</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">bval</span><span class="p">:</span>
                            <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">193</span><span class="p">,</span><span class="mi">96</span><span class="p">))</span>

                    <span class="k">if</span> <span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span> <span class="ow">in</span> <span class="n">fluxObjs</span><span class="p">:</span>
                        <span class="n">grid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">153</span><span class="p">))</span>
            <span class="n">grid</span><span class="o">.</span><span class="n">ForceRefresh</span><span class="p">()</span>

        <span class="c1">##  def EvtGridCellSelect(self, event):</span>
            <span class="c1">##  row = event.GetRow()</span>
            <span class="c1">##  col = event.GetCol()</span>
            <span class="c1">##  self.cell_selected_value = self.RGrid.GetCellValue(row, col)</span>
            <span class="c1">##  print &#39;selected value&#39;, self.cell_selected_value</span>
            <span class="c1">##  event.Skip()</span>

        <span class="k">def</span> <span class="nf">writeCmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txt</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cmd: &#39;</span><span class="o">+</span><span class="n">txt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PyBox</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">txt</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>


        <span class="k">def</span> <span class="nf">MENUOnAbout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">e</span><span class="p">):</span>
            <span class="c1"># Create a message dialog box</span>
            <span class="n">dlg</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">MessageDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot; PySCes-CBM model editor</span><span class="se">\n</span><span class="s2">(C) Brett G. Olivier, Amsterdam 2012&quot;</span><span class="p">,</span> <span class="s2">&quot;About PySCes-CBM model editor&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">OK</span><span class="p">)</span>
            <span class="n">dlg</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="c1"># Shows it</span>
            <span class="n">dlg</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span> <span class="c1"># finally destroy it when finished.</span>

        <span class="k">def</span> <span class="nf">MENUOnExit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">e</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Close the frame.</span>

        <span class="k">def</span> <span class="nf">MENUExport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">e</span><span class="p">):</span>
            <span class="n">dlg</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Enter filename&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OUT_dir</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Python files (*.py)|*.py|All files (*.*)|*.*&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">FD_SAVE</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
                <span class="n">OUT_file</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">GetFilename</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">OUT_dir</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">GetDirectory</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">OUT_file</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.py&#39;</span><span class="p">:</span>
                    <span class="n">OUT_file</span> <span class="o">+=</span> <span class="s1">&#39;.py&#39;</span>
                <span class="n">F</span> <span class="o">=</span> <span class="n">file</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">OUT_dir</span><span class="p">,</span> <span class="n">OUT_file</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
                <span class="n">F</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PyBox</span><span class="o">.</span><span class="n">GetValue</span><span class="p">())</span>
                <span class="n">F</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
                <span class="n">F</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">dlg</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">MENUOnSave</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">e</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; Open a file&quot;&quot;&quot;</span>
            <span class="n">dlg</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Enter filename&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OUT_dir</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;SBML files (*.xml)|*.xml|All files (*.*)|*.*&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">FD_SAVE</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">OUT_file</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">GetFilename</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">OUT_dir</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">GetDirectory</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">OUT_file</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.xml&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">OUT_file</span> <span class="o">+=</span> <span class="s1">&#39;.xml&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">inputfile_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">OUT_file</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_cbm_</span><span class="o">.</span><span class="n">CBWrite</span><span class="o">.</span><span class="n">writeSBML2FBA</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OUT_file</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">OUT_dir</span><span class="p">,</span> <span class="n">sbml_level_version</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="n">dlg</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">MENUAnalyseBalances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="sd">&#39;&#39;&#39; Check the reaction balances&#39;&#39;&#39;</span>
            <span class="n">wait</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BusyCursor</span><span class="p">()</span>
            <span class="n">rids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionIds</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ReactionBalanceInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cbm_</span><span class="o">.</span><span class="n">CBTools</span><span class="o">.</span><span class="n">checkReactionBalanceElemental</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="p">,</span> <span class="n">Rid</span><span class="o">=</span><span class="n">rids</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">reactions</span><span class="p">)):</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RGridCol</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rlabels</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Balanced&#39;</span><span class="p">:</span>
                        <span class="n">bval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">reactions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">is_balanced</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">bval</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">bval</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">bval</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">SetCellBackgroundColour</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">193</span><span class="p">,</span><span class="mi">96</span><span class="p">))</span>
            <span class="k">del</span> <span class="n">wait</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">MessageBox</span><span class="p">(</span><span class="s1">&#39;Balance Check Complete&#39;</span><span class="p">,</span> <span class="s1">&#39;Info&#39;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">OK</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">ICON_INFORMATION</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">chkFloat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">StatusBar</span><span class="o">.</span><span class="n">SetStatusText</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">StatusBar</span><span class="o">.</span><span class="n">SetStatusText</span><span class="p">(</span><span class="s1">&#39;Invalid input </span><span class="si">%s</span><span class="s1"> was not a float!&#39;</span> <span class="o">%</span> <span class="n">val</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">def</span> <span class="nf">EvtRGridCellSelect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cell select event&quot;</span><span class="p">)</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetRow</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">row</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ActiveReaction</span><span class="p">:</span>
                <span class="n">cval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">GetCellValue</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">updateInfoFromReactionName</span><span class="p">(</span><span class="n">cval</span><span class="p">)</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">updateInfoFromReactionName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cval</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UpdateReactionInfo</span><span class="p">(</span><span class="n">cval</span><span class="p">)</span>
            <span class="c1">#self.UpdateSpeciesInfoForReaction(cval)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UpdateReactionGraph</span><span class="p">(</span><span class="n">cval</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ActiveReaction</span> <span class="o">=</span> <span class="n">cval</span>

        <span class="k">def</span> <span class="nf">EvtRGridCellChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetRow</span><span class="p">()</span>
            <span class="n">col</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetCol</span><span class="p">()</span>
            <span class="n">clbl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">GetColLabelValue</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
            <span class="c1">#All cells have a value, regardless of the editor.</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Changed cell: (</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">))</span>
            <span class="n">rid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">GetCellValue</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">cell_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">GetCellValue</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Row/Col: </span><span class="si">{}</span><span class="s1"> | </span><span class="si">{}</span><span class="s1"> | </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">clbl</span><span class="p">,</span> <span class="n">cell_val</span><span class="p">))</span>
            <span class="c1"># update reaction info</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UpdateReactionInfo</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">cell_val</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">cell_val</span><span class="p">))</span>
            <span class="n">cell_val</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cell_val</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">clbl</span> <span class="o">==</span> <span class="s1">&#39;LB&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chkFloat</span><span class="p">(</span><span class="n">cell_val</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">cell_val</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">cell_val</span><span class="p">))</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">LB old&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionLowerBound</span><span class="p">(</span><span class="n">rid</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">setReactionLowerBound</span><span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">cell_val</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;LB new&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionLowerBound</span><span class="p">(</span><span class="n">rid</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">cell_val</span> <span class="o">==</span> <span class="s1">&#39;inf&#39;</span> <span class="ow">or</span> <span class="n">cell_val</span> <span class="o">==</span> <span class="s1">&#39;-inf&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;cmod.setReactionLowerBound(&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">cell_val</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;cmod.setReactionLowerBound(&#39;</span><span class="si">%s</span><span class="s2">&#39;, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">cell_val</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionLowerBound</span><span class="p">(</span><span class="n">rid</span><span class="p">)))</span>
            <span class="k">elif</span> <span class="n">clbl</span> <span class="o">==</span> <span class="s1">&#39;UB&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chkFloat</span><span class="p">(</span><span class="n">cell_val</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">UB old&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionUpperBound</span><span class="p">(</span><span class="n">rid</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">setReactionUpperBound</span><span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">cell_val</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;UB new&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionUpperBound</span><span class="p">(</span><span class="n">rid</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">cell_val</span> <span class="o">==</span> <span class="s1">&#39;inf&#39;</span> <span class="ow">or</span> <span class="n">cell_val</span> <span class="o">==</span> <span class="s1">&#39;-inf&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;cmod.setReactionUpperBound(&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">cell_val</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;cmod.setReactionUpperBound(&#39;</span><span class="si">%s</span><span class="s2">&#39;, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">cell_val</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">SetCellValue</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReactionUpperBound</span><span class="p">(</span><span class="n">rid</span><span class="p">)))</span>
            <span class="k">elif</span> <span class="n">clbl</span> <span class="o">==</span> <span class="s1">&#39;Reaction&#39;</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">clbl</span> <span class="o">==</span> <span class="s1">&#39;Name&#39;</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Name old&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReaction</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReaction</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span><span class="o">.</span><span class="n">setName</span><span class="p">(</span><span class="n">cell_val</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Name new&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReaction</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;cmod.getReaction(&#39;</span><span class="si">%s</span><span class="s2">&#39;).setName(&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">cell_val</span><span class="p">))</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

        <span class="c1">#def EVT_BUT_EnableEdit(self,event):</span>
            <span class="c1">#print &#39;EVT_BUT_EnableEdit&#39;</span>
            <span class="c1">#for tb in self.TEXTBOXES_Redit:</span>
                <span class="c1">#tb.Enable()</span>
            <span class="c1">#event.Skip()</span>

        <span class="k">def</span> <span class="nf">SemSBML_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ActiveReaction</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">R</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReaction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__ActiveReaction</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SelectGridRow</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">getId</span><span class="p">())</span>
                <span class="n">searchString</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">CallSemanticSBML</span><span class="p">(</span><span class="n">searchString</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Sinfbox</span><span class="o">.</span><span class="n">SetPage</span><span class="p">(</span><span class="s2">&quot;&lt;html&gt;&lt;body&gt;&#39;&lt;h1&gt;Please select a reaction!&lt;/h1&gt;&#39;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">ChangeSelection</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">SemSBML_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ActiveReaction</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">R</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="o">.</span><span class="n">getReaction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__ActiveReaction</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SelectGridRow</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">getId</span><span class="p">())</span>
                <span class="n">searchString</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">CallSemanticSBML</span><span class="p">(</span><span class="n">searchString</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Sinfbox</span><span class="o">.</span><span class="n">SetPage</span><span class="p">(</span><span class="s2">&quot;&lt;html&gt;&lt;body&gt;&#39;&lt;h1&gt;Please select a reaction!&lt;/h1&gt;&#39;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">ChangeSelection</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">CallSemanticSBML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">searchString</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;MENUAnalyseSemanticSBML&#39;</span><span class="p">)</span>
            <span class="c1">#self.TEXTBOX_Annotate.Enable()</span>
            <span class="n">rs</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">HAVE_URLLIB2</span><span class="p">:</span>
                <span class="n">wait</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BusyCursor</span><span class="p">()</span>
                <span class="c1">#self.TEXTBOX_Annotate.Clear()</span>

                <span class="n">rs</span> <span class="o">=</span> <span class="s1">&#39;&lt;h2&gt;SemanticSBML query&lt;/h2&gt;&lt;br/&gt;&lt;h3&gt;</span><span class="si">%s</span><span class="s1">&lt;/h3&gt;&#39;</span> <span class="o">%</span> <span class="n">searchString</span>
                <span class="c1"># semanticSBML REST web services</span>
                <span class="n">site_root</span> <span class="o">=</span> <span class="s2">&quot;www.semanticsbml.org&quot;</span>
                <span class="n">reply_mode</span> <span class="o">=</span> <span class="s1">&#39;.xml&#39;</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">SemanticSBMLClient</span><span class="o">.</span><span class="n">Connect</span><span class="p">(</span><span class="n">site_root</span><span class="p">)</span>
                    <span class="n">searchString</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SemanticSBMLClient</span><span class="o">.</span><span class="n">URLEncode</span><span class="p">(</span><span class="n">searchString</span><span class="p">)</span>
                    <span class="n">RESTquery</span> <span class="o">=</span> <span class="s2">&quot;/semanticSBML/annotate/search</span><span class="si">%s</span><span class="s2">?q=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">reply_mode</span><span class="p">,</span> <span class="n">searchString</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;+&#39;</span><span class="p">))</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">RESTquery</span><span class="p">)</span>
                    <span class="n">data1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SemanticSBMLClient</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">RESTquery</span><span class="p">)</span>
                    <span class="n">data1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SemanticSBMLClient</span><span class="o">.</span><span class="n">URLDecode</span><span class="p">(</span><span class="n">data1</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">SemanticSBMLClient</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s1">&#39;SemanticSBMLClient = cbm.CBNetDB.SemanticSBML()&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s1">&#39;SemanticSBMLClient.Connect(</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">site_root</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s1">&#39;data1 = SemanticSBMLClient.Get(</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">RESTquery</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s1">&#39;SemanticSBMLClient.Close()&#39;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SemanticSBMLClient</span><span class="o">.</span><span class="n">GetLog</span><span class="p">())</span>

                    <span class="n">item_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;&lt;item&gt;.+?&lt;/item&gt;&#39;</span><span class="p">)</span>
                    <span class="n">items</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">item_re</span><span class="p">,</span> <span class="n">data1</span><span class="p">)</span>
                    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;item&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;/item&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
                    <span class="c1">#self.TEXTBOX_Annotate.write(&#39;SemanticSBML results for: %s\n\n&#39; % (urllib2.unquote(searchString)))</span>
                    <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table border=&quot;1&quot; cellpadding=&quot;5&quot;&gt;&#39;</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
                        <span class="c1">#url = self.SemanticSBMLClient.MiriamURN2IdentifiersURL(i)</span>
                        <span class="n">url</span> <span class="o">=</span> <span class="n">i</span>
                        <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;&lt;a href=</span><span class="si">%s</span><span class="s1">&gt;</span><span class="si">%s</span><span class="s1">&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                        <span class="c1">#self.TEXTBOX_Annotate.write(&#39;%s\n&#39; % i)&lt;a href=&quot;/Education/&quot;&gt;NCBI Education&lt;/a&gt;</span>
                    <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table border=&quot;1&quot; cellpadding=&quot;5&quot;&gt;&#39;</span>
                    <span class="k">del</span> <span class="n">wait</span>


                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                    <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h1&gt;Error connecting to: </span><span class="si">%s</span><span class="s1">&lt;/h1&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">site_root</span><span class="p">)</span>
                    <span class="c1">#self.TEXTBOX_Annotate.WriteText(&#39;\n******************************************************\n&#39;)</span>
                    <span class="c1">#self.TEXTBOX_Annotate.WriteText(&#39;\n* Error connecting to: %s *\n\n&#39; % (site_root))</span>
                    <span class="c1">#self.TEXTBOX_Annotate.WriteText(&#39;******************************************************\n\n&#39;)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">HAVE_URLLIB2</span><span class="p">:</span>
                <span class="c1">#self.TEXTBOX_Annotate.WriteText(&#39;Please select a reaction!&#39;)</span>
                <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h1&gt;Please select a reaction!&lt;/h1&gt;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#self.TEXTBOX_Annotate.WriteText(&#39;HTTPLIB not available&#39;)</span>
                <span class="n">rs</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h1&gt;HTTPLIB not available!&lt;/h1&gt;&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sinfbox</span><span class="o">.</span><span class="n">SetPage</span><span class="p">(</span><span class="s2">&quot;&lt;html&gt;&lt;body&gt;</span><span class="si">%s</span><span class="s2">&lt;/body&gt;&lt;/html&gt;&quot;</span> <span class="o">%</span> <span class="n">rs</span><span class="p">)</span>



        <span class="k">def</span> <span class="nf">EVT_BUT_optimise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="n">wait</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BusyCursor</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cbm_</span><span class="o">.</span><span class="n">CBSolver</span><span class="o">.</span><span class="n">analyzeModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UpdateRGridData</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UpdateModelStatus</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;cbmpy.CBSolver.analyzeModel(cmod)&quot;</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">wait</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">EVT_BUT_minsum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
            <span class="n">wait</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BusyCursor</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cbm_</span><span class="o">.</span><span class="n">CBSolver</span><span class="o">.</span><span class="n">cplx_MinimizeSumOfAbsFluxes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmod_</span><span class="p">,</span> <span class="n">selected_reactions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pre_opt</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">objF2constr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rhs_sense</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">optPercentage</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span> <span class="n">work_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">objective_coefficients</span><span class="o">=</span><span class="p">{},</span> <span class="n">return_lp_obj</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UpdateRGridData</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UpdateModelStatus</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeCmd</span><span class="p">(</span><span class="s2">&quot;cbmpy.CBSolver.cplx_MinimizeSumOfAbsFluxes(cmod, selected_reactions=None, pre_opt=True, tol=None, objF2constr=True, rhs_sense=&#39;lower&#39;, optPercentage=100.0, objective_coefficients=</span><span class="si">{}</span><span class="s2">, return_lp_obj=False)&quot;</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">wait</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
            <span class="c1">##  cbmpy.CBSolver.cplx_MinimizeSumOfAbsFluxes</span>

        <span class="k">def</span> <span class="nf">PrintCoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;coords are: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">Coords</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;pixel coords are: </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">GetPosition</span><span class="p">()),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">EVT_FRAME_resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
            <span class="c1">#print &quot;Pixel coords are: %s&quot;%(event.GetPosition(),)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Panel size&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MainPanel</span><span class="o">.</span><span class="n">GetSize</span><span class="p">())</span>
            <span class="c1">#print &#39;Frame size&#39;, self.GetSize()</span>
            <span class="c1">#print &#39;Panel minsize&#39;, self.MainPanel.GetMinSize()</span>
            <span class="c1">#print &#39;Frame minsize&#39;, self.GetMinSize()</span>
            <span class="c1">#print &#39;Panel virtualsize&#39;, self.MainPanel.GetVirtualSize()</span>
            <span class="c1">#print &#39;Frame virtualsize&#39;, self.GetVirtualSize()</span>
            <span class="c1">#print &#39;mainSizer minsize&#39;, self.mainSizer.GetMinSize()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FRAME_resize</span><span class="p">()</span>
            <span class="c1">#print &#39;\n&#39;</span>

        <span class="k">def</span> <span class="nf">FRAME_resize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="c1"># get the frame size and adjust the main panel to it</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MainPanel</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetVirtualSize</span><span class="p">())</span>

            <span class="c1">#LPsize = wx.Size(self.PanelSize[0]*self.LPwidth, self.PanelSize[1]*self.LPheight)</span>
            <span class="c1">#RPsize = wx.Size(self.PanelSize[0]*self.RPwidth, self.PanelSize[1]*self.RPheight)</span>
            <span class="c1">#LPsize = wx.Size(self.PanelSize[0]*self.LPwidth, self.RGridInitSize[1])</span>
            <span class="n">LPsize</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">LPwidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">RGridGap</span><span class="p">)</span>
            <span class="n">RPsize</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">RPwidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="c1"># using the new panels to resize the components</span>
            <span class="c1"># self.StatusPanel.SetMinSize(wx.Size(LPsize[0],self.StatusPanel.GetVirtualSize()[1]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid_scrollwindow</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">LPsize</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">LPsize</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NoteB1</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">RPsize</span><span class="p">)</span>
            <span class="n">RinfSize</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">RPwidth</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">PanelSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">RPheight</span><span class="o">-</span><span class="mi">25</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">PyBox</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">RinfSize</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Rinfbox</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">RinfSize</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sinfbox</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">RinfSize</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MetCanvas</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">RinfSize</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GenCanvas</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">RinfSize</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RightPanel</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">RPsize</span><span class="p">)</span>
            <span class="c1">#self.LeftPanel.Layout()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MainPanel</span><span class="o">.</span><span class="n">CenterOnParent</span><span class="p">()</span>


        <span class="k">def</span> <span class="nf">EVT_onClick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pixel coords are: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">GetPosition</span><span class="p">()),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
            <span class="c1">#print &#39;Panel size&#39;, self.MainPanel.GetSize()</span>
            <span class="c1">#print &#39;Frame size&#39;, self.GetSize()</span>
            <span class="c1">#print &#39;Panel minsize&#39;, self.MainPanel.GetMinSize()</span>
            <span class="c1">#print &#39;Frame minsize&#39;, self.GetMinSize()</span>
            <span class="c1">#print &#39;Panel virtualsize&#39;, self.MainPanel.GetVirtualSize()</span>
            <span class="c1">#print &#39;Frame virtualsize&#39;, self.GetVirtualSize()</span>
            <span class="c1">#print &#39;\nmainSizer minsize&#39;, self.mainSizer.GetMinSize()</span>
            <span class="c1">#print &#39;\n&#39;</span>


        <span class="k">def</span> <span class="nf">__C_BUFF_ADD__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__C_BUFF__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__C_BUFF__</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__C_BUFF__</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>


        <span class="k">def</span> <span class="nf">HIT_STB_onClick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">Object</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Object</span><span class="o">.</span><span class="n">Name</span> <span class="o">+</span> <span class="s2">&quot; got Hit with Left&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Object</span><span class="o">.</span><span class="n">Name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Smap</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">UpdateSpeciesGraph</span><span class="p">(</span><span class="n">Object</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Object</span><span class="o">.</span><span class="n">Name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Rmap</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">UpdateReactionGraph</span><span class="p">(</span><span class="n">Object</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">updateInfoFromReactionName</span><span class="p">(</span><span class="n">Object</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">SelectRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RGridRow</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">Object</span><span class="o">.</span><span class="n">Name</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">RGrid</span><span class="o">.</span><span class="n">MakeCellVisible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RGridRow</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">Object</span><span class="o">.</span><span class="n">Name</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>



            <span class="c1">##  Object.SetLineColor(&#39;Green&#39;)</span>
            <span class="c1">##  self.FCanvas_met.Draw(True)</span>
            <span class="c1">##  self.FCanvas_met.ZoomToBB()</span>
            <span class="c1">##  wx.CallAfter(self.FCanvas_met.ZoomToBB)</span>
            <span class="c1">##  wx.CallAfter(self.FCanvas_met.Draw)</span>


<div class="viewcode-block" id="HtmlWindowMod"><a class="viewcode-back" href="../../modules_doc.html#cbmpy.CBWx.HtmlWindowMod">[docs]</a>    <span class="k">class</span> <span class="nc">HtmlWindowMod</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">HtmlWindow</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides &#39;OnLinkClicked&#39; to open links in external browser</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">HtmlWindow</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;gtk2&quot;</span> <span class="ow">in</span> <span class="n">wx</span><span class="o">.</span><span class="n">PlatformInfo</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SetStandardFonts</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">OnLinkClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">link</span><span class="p">):</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">LaunchDefaultBrowser</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">GetHref</span><span class="p">())</span></div>

<div class="viewcode-block" id="circlePoints"><a class="viewcode-back" href="../../modules_doc.html#cbmpy.CBWx.circlePoints">[docs]</a>    <span class="k">def</span> <span class="nf">circlePoints</span><span class="p">(</span><span class="n">totalPoints</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">startAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">arc</span><span class="o">=</span><span class="mi">360</span><span class="p">,</span> <span class="n">circleradius</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">centerxy</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;forward&#39;</span><span class="p">,</span> <span class="n">evenDistribution</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of points evenly spread around a circle:</span>

<span class="sd">         - *totalPoints* how many points</span>
<span class="sd">         - *startAngle* where to start</span>
<span class="sd">         - *arc* how far to go</span>
<span class="sd">         - *circleradius* radius</span>
<span class="sd">         - *centerxy* origin</span>
<span class="sd">         - *direction* &#39;forward&#39; or &#39;backward&#39;</span>
<span class="sd">         - *evenDistribution* True/False</span>

<span class="sd">        This code has been adapted from the Flash example that can be found here:</span>
<span class="sd">        http://www.lextalkington.com/blog/2009/12/generate-points-around-a-circles-circumference/</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">##  totalPoints = 4</span>
        <span class="c1">##  startAngle = 270</span>
        <span class="c1">##  arc = 180</span>
        <span class="c1">##  direction = &#39;forward&#39;</span>
        <span class="c1">##  evenDistribution = True</span>

        <span class="c1">##  circleradius = 1</span>
        <span class="c1">##  centerx = 0</span>
        <span class="c1">##  centery = 0</span>

        <span class="n">roundfact</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">mpi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span>
        <span class="n">startRadians</span> <span class="o">=</span> <span class="n">startAngle</span> <span class="o">*</span> <span class="n">mpi</span>
        <span class="n">incrementAngle</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">arc</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">totalPoints</span><span class="p">)</span>
        <span class="n">incrementRadians</span> <span class="o">=</span> <span class="n">incrementAngle</span> <span class="o">*</span> <span class="n">mpi</span>

        <span class="k">if</span> <span class="n">arc</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">:</span>
            <span class="c1"># this spreads the points out evenly across the arc</span>
            <span class="k">if</span> <span class="n">evenDistribution</span><span class="p">:</span>
                <span class="n">incrementAngle</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">arc</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">totalPoints</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">incrementRadians</span> <span class="o">=</span> <span class="n">incrementAngle</span> <span class="o">*</span> <span class="n">mpi</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">incrementAngle</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">arc</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">totalPoints</span><span class="p">)</span>
                <span class="n">incrementRadians</span> <span class="o">=</span> <span class="n">incrementAngle</span> <span class="o">*</span> <span class="n">mpi</span><span class="p">;</span>

        <span class="n">cxy</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">totalPoints</span><span class="p">):</span>
            <span class="n">xp</span> <span class="o">=</span> <span class="n">centerxy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">startRadians</span><span class="p">)</span> <span class="o">*</span> <span class="n">circleradius</span>
            <span class="n">yp</span> <span class="o">=</span> <span class="n">centerxy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">startRadians</span><span class="p">)</span> <span class="o">*</span> <span class="n">circleradius</span>
            <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;forward&#39;</span><span class="p">:</span>
                <span class="n">startRadians</span> <span class="o">+=</span> <span class="n">incrementRadians</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">startRadians</span> <span class="o">-=</span> <span class="n">incrementRadians</span>
            <span class="n">cxy</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">round</span><span class="p">(</span><span class="n">xp</span><span class="p">,</span><span class="n">roundfact</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">yp</span><span class="p">,</span> <span class="n">roundfact</span><span class="p">)))</span>
            <span class="c1">##  print (round(xp,roundfact), round(yp, roundfact))</span>
        <span class="k">return</span> <span class="n">cxy</span></div>


    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    wxPython Custom Widget Collection 20060207</span>
<span class="sd">    Written By: Edward Flick (eddy -=at=- cdf-imaging -=dot=- com)</span>
<span class="sd">                Michele Petrazzo (michele -=dot=- petrazzo -=at=- unipex -=dot=- it)</span>
<span class="sd">                Will Sadkin (wsadkin-=at=- nameconnector -=dot=- com)</span>
<span class="sd">    Copyright 2006 (c) CDF Inc. ( http://www.cdf-imaging.com )</span>
<span class="sd">    Contributed to the wxPython project under the wxPython project&#39;s license.</span>

<span class="sd">    &#39;&#39;&#39;</span>


    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">getSmallUpArrowData</span><span class="p">():</span>
        <span class="k">return</span> \
    <span class="s1">&#39;</span><span class="se">\x89</span><span class="s1">PNG</span><span class="se">\r\n\x1a\n\x00\x00\x00\r</span><span class="s1">IHDR</span><span class="se">\x00\x00\x00\x10\x00\x00\x00\x10\x08\x06\</span>
<span class="s1">    </span><span class="se">\x00\x00\x00\x1f\xf3\xff</span><span class="s1">a</span><span class="se">\x00\x00\x00\x04</span><span class="s1">sBIT</span><span class="se">\x08\x08\x08\x08</span><span class="s1">|</span><span class="se">\x08</span><span class="s1">d</span><span class="se">\x88\x00\</span>
<span class="s1">    </span><span class="se">\x00\x00</span><span class="s1">&lt;IDAT8</span><span class="se">\x8d</span><span class="s1">cddbf</span><span class="se">\xa0\x04</span><span class="s1">0Q</span><span class="se">\xa4</span><span class="s1">{h</span><span class="se">\x18\xf0\xff\xdf\xdf\xff</span><span class="s1">d</span><span class="se">\x1b\x00\xd3\</span>
<span class="s1">    </span><span class="se">\x8c\xcf\x10\x9c\x06\xa0</span><span class="s1">k</span><span class="se">\xc2</span><span class="s1">e</span><span class="se">\x08</span><span class="s1">m</span><span class="se">\xc2\x00\x97</span><span class="s1">m</span><span class="se">\xd8\xc4</span><span class="s1">1</span><span class="se">\x0c</span><span class="s1"> </span><span class="se">\x14</span><span class="s1">h</span><span class="se">\xe8\xf2\</span>
<span class="s1">    </span><span class="se">\x8c\xa3</span><span class="s1">)q</span><span class="se">\x10\x18\x00\x00</span><span class="s1">R</span><span class="se">\xd8</span><span class="s1">#</span><span class="se">\xec\xb2\xcd\xc1</span><span class="s1">Y</span><span class="se">\x00\x00\x00\x00</span><span class="s1">IEND</span><span class="se">\xae</span><span class="s1">B`</span><span class="se">\</span>
<span class="s1">    </span><span class="se">\x82</span><span class="s1">&#39;</span>

    <span class="k">def</span> <span class="nf">getSmallUpArrowBitmap</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">BitmapFromImage</span><span class="p">(</span><span class="n">getSmallUpArrowImage</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">getSmallUpArrowImage</span><span class="p">():</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">csio</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">getSmallUpArrowData</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">ImageFromStream</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">getSmallDnArrowData</span><span class="p">():</span>
        <span class="k">return</span> \
    <span class="s2">&quot;</span><span class="se">\x89</span><span class="s2">PNG</span><span class="se">\r\n\x1a\n\x00\x00\x00\r</span><span class="s2">IHDR</span><span class="se">\x00\x00\x00\x10\x00\x00\x00\x10\x08\x06\</span>
<span class="s2">    </span><span class="se">\x00\x00\x00\x1f\xf3\xff</span><span class="s2">a</span><span class="se">\x00\x00\x00\x04</span><span class="s2">sBIT</span><span class="se">\x08\x08\x08\x08</span><span class="s2">|</span><span class="se">\x08</span><span class="s2">d</span><span class="se">\x88\x00\</span>
<span class="s2">    </span><span class="se">\x00\x00</span><span class="s2">HIDAT8</span><span class="se">\x8d</span><span class="s2">cddbf</span><span class="se">\xa0\x04</span><span class="s2">0Q</span><span class="se">\xa4</span><span class="s2">{</span><span class="se">\xd4\x00\x06\x06\x06\x06\x06\x16</span><span class="s2">t</span><span class="se">\x81\</span>
<span class="s2">    </span><span class="se">\xff\xff\xfe\xfe</span><span class="s2">&#39;</span><span class="se">\xa4\x89\x91\x89\x99\x11\xa7\x0b\x90</span><span class="s2">%</span><span class="se">\t</span><span class="s2">i</span><span class="se">\xc6</span><span class="s2">j</span><span class="se">\x00</span><span class="s2">&gt;C</span><span class="se">\xb0\x89\</span>
<span class="s2">    </span><span class="se">\xd3</span><span class="s2">.</span><span class="se">\x10\xd1</span><span class="s2">m</span><span class="se">\xc3\xe5</span><span class="s2">*</span><span class="se">\xbc</span><span class="s2">.</span><span class="se">\x80</span><span class="s2">i</span><span class="se">\xc2\x17</span><span class="s2">.</span><span class="se">\x8c\xa3</span><span class="s2">y</span><span class="se">\x81\x01\x00\xa1\x0e\x04</span><span class="s2">e</span><span class="se">\</span>
<span class="s2">    ?</span><span class="se">\x84</span><span class="s2">B</span><span class="se">\xef\x00\x00\x00\x00</span><span class="s2">IEND</span><span class="se">\xae</span><span class="s2">B`</span><span class="se">\x82</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">getSmallDnArrowBitmap</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">BitmapFromImage</span><span class="p">(</span><span class="n">getSmallDnArrowImage</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">getSmallDnArrowImage</span><span class="p">():</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">csio</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">getSmallDnArrowData</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">ImageFromStream</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
    <span class="c1">#----------------------------------------------------------------------</span>

    <span class="k">class</span> <span class="nc">myListCtrl</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ListCtrl</span><span class="p">,</span> <span class="n">listmix</span><span class="o">.</span><span class="n">ListCtrlAutoWidthMixin</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">ID</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">DefaultPosition</span><span class="p">,</span>
                     <span class="n">size</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">DefaultSize</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">ListCtrl</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">ID</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">style</span><span class="p">)</span>
            <span class="n">listmix</span><span class="o">.</span><span class="n">ListCtrlAutoWidthMixin</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">TextCtrlAutoComplete</span> <span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">,</span> <span class="n">listmix</span><span class="o">.</span><span class="n">ColumnSorterMixin</span> <span class="p">):</span>

        <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">colNames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">choices</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">multiChoices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">showHead</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dropDownClick</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">colFetch</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">colSearch</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hideOnNoMatch</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">selectCallback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">entryCallback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">matchFunction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="o">**</span><span class="n">therest</span><span class="p">)</span> <span class="p">:</span>
            <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            Constructor works just like wx.TextCtrl except you can pass in a</span>
<span class="sd">            list of choices.  You can also change the choice list at any time</span>
<span class="sd">            by calling setChoices.</span>
<span class="sd">            &#39;&#39;&#39;</span>

            <span class="k">if</span> <span class="s1">&#39;style&#39;</span> <span class="ow">in</span> <span class="n">therest</span><span class="p">:</span>
                <span class="n">therest</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_PROCESS_ENTER</span> <span class="o">|</span> <span class="n">therest</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">therest</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">TE_PROCESS_ENTER</span>

            <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="o">**</span><span class="n">therest</span> <span class="p">)</span>

            <span class="c1">#Some variables</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dropDownClick</span> <span class="o">=</span> <span class="n">dropDownClick</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_colNames</span> <span class="o">=</span> <span class="n">colNames</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span> <span class="o">=</span> <span class="n">multiChoices</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_showHead</span> <span class="o">=</span> <span class="n">showHead</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span> <span class="o">=</span> <span class="n">choices</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lastinsertionpoint</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hideOnNoMatch</span> <span class="o">=</span> <span class="n">hideOnNoMatch</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selectCallback</span> <span class="o">=</span> <span class="n">selectCallback</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entryCallback</span> <span class="o">=</span> <span class="n">entryCallback</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_matchFunction</span> <span class="o">=</span> <span class="n">matchFunction</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_screenheight</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings</span><span class="o">.</span><span class="n">GetMetric</span><span class="p">(</span> <span class="n">wx</span><span class="o">.</span><span class="n">SYS_SCREEN_Y</span> <span class="p">)</span>

            <span class="c1">#sort variable needed by listmix</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">itemDataMap</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

            <span class="c1">#Load and sort data</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Pass me at least one of multiChoices OR choices&quot;</span><span class="p">)</span>

            <span class="c1">#widgets</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">PopupWindow</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span>

            <span class="c1">#Control the style</span>
            <span class="n">flags</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_REPORT</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_SINGLE_SEL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_SORT_ASCENDING</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">showHead</span> <span class="ow">and</span> <span class="n">multiChoices</span><span class="p">)</span> <span class="p">:</span>
                <span class="n">flags</span> <span class="o">=</span> <span class="n">flags</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_NO_HEADER</span>

            <span class="c1">#Create the list and bind the events</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span> <span class="o">=</span> <span class="n">myListCtrl</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">flags</span><span class="p">,</span>
                                               <span class="n">pos</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">)</span>

            <span class="c1">#initialize the parent</span>
            <span class="k">if</span> <span class="n">multiChoices</span><span class="p">:</span> <span class="n">ln</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">multiChoices</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">ln</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="c1">#else: ln = len(choices)</span>
            <span class="n">listmix</span><span class="o">.</span><span class="n">ColumnSorterMixin</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ln</span><span class="p">)</span>

            <span class="c1">#load the data</span>
            <span class="k">if</span> <span class="n">multiChoices</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">SetMultipleChoices</span> <span class="p">(</span><span class="n">multiChoices</span><span class="p">,</span> <span class="n">colSearch</span><span class="o">=</span><span class="n">colSearch</span><span class="p">,</span> <span class="n">colFetch</span><span class="o">=</span><span class="n">colFetch</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">SetChoices</span> <span class="p">(</span> <span class="n">choices</span> <span class="p">)</span>

            <span class="n">gp</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">while</span> <span class="p">(</span> <span class="n">gp</span> <span class="o">!=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">gp</span><span class="o">.</span><span class="n">Bind</span> <span class="p">(</span> <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MOVE</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onControlChanged</span><span class="p">,</span> <span class="n">gp</span> <span class="p">)</span>
                <span class="n">gp</span><span class="o">.</span><span class="n">Bind</span> <span class="p">(</span> <span class="n">wx</span><span class="o">.</span><span class="n">EVT_SIZE</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onControlChanged</span><span class="p">,</span> <span class="n">gp</span> <span class="p">)</span>
                <span class="n">gp</span> <span class="o">=</span> <span class="n">gp</span><span class="o">.</span><span class="n">GetParent</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span> <span class="n">wx</span><span class="o">.</span><span class="n">EVT_KILL_FOCUS</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onControlChanged</span><span class="p">,</span> <span class="bp">self</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span> <span class="n">wx</span><span class="o">.</span><span class="n">EVT_TEXT</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onEnteredText</span><span class="p">,</span> <span class="bp">self</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span> <span class="n">wx</span><span class="o">.</span><span class="n">EVT_KEY_DOWN</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onKeyDown</span><span class="p">,</span> <span class="bp">self</span> <span class="p">)</span>

            <span class="c1">#If need drop down on left click</span>
            <span class="k">if</span> <span class="n">dropDownClick</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span> <span class="p">(</span> <span class="n">wx</span><span class="o">.</span><span class="n">EVT_LEFT_DOWN</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onClickToggleDown</span><span class="p">,</span> <span class="bp">self</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span> <span class="p">(</span> <span class="n">wx</span><span class="o">.</span><span class="n">EVT_LEFT_UP</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onClickToggleUp</span><span class="p">,</span> <span class="bp">self</span> <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span> <span class="n">wx</span><span class="o">.</span><span class="n">EVT_LISTBOX</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onListItemSelected</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_LEFT_DOWN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onListClick</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_LEFT_DCLICK</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onListDClick</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_LIST_COL_CLICK</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onListColClick</span><span class="p">)</span>

            <span class="c1">#self.il = wx.ImageList(16, 16)</span>

            <span class="c1">#self.sm_dn = self.il.Add(getSmallDnArrowBitmap())</span>
            <span class="c1">#self.sm_up = self.il.Add(getSmallUpArrowBitmap())</span>

            <span class="c1">#self.dropdownlistbox.SetImageList(self.il, wx.IMAGE_LIST_SMALL)</span>
            <span class="c1">#self._ascending = True</span>


        <span class="c1">#-- methods called from mixin class</span>
        <span class="k">def</span> <span class="nf">GetSortImages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sm_dn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sm_up</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">GetListCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span>

        <span class="c1"># -- event methods</span>
        <span class="k">def</span> <span class="nf">onListClick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
            <span class="n">toSel</span><span class="p">,</span> <span class="n">flag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">HitTest</span><span class="p">(</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetPosition</span><span class="p">()</span> <span class="p">)</span>
            <span class="c1">#no values on poition, return</span>
            <span class="k">if</span> <span class="n">toSel</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="k">return</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">toSel</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">onListDClick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setValueFromSelected</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">onListColClick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
            <span class="n">col</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetColumn</span><span class="p">()</span>

            <span class="c1">#reverse the sort</span>
            <span class="k">if</span> <span class="n">col</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colSearch</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ascending</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ascending</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">SortListItems</span><span class="p">(</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetColumn</span><span class="p">(),</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_ascending</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_colSearch</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetColumn</span><span class="p">()</span>
            <span class="n">evt</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">onEnteredText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetString</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entryCallback</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_entryCallback</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">text</span><span class="p">:</span>
                <span class="c1"># control is empty; hide dropdown if shown:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span><span class="o">.</span><span class="n">IsShown</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_showDropDown</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
                <span class="k">return</span>


            <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span><span class="p">:</span>
                <span class="c1">#load the sorted data into the listbox</span>
                <span class="n">dd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span>
                <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span><span class="n">dd</span><span class="o">.</span><span class="n">GetItem</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colSearch</span><span class="p">)</span><span class="o">.</span><span class="n">GetText</span><span class="p">()</span>
                           <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">dd</span><span class="o">.</span><span class="n">GetItemCount</span><span class="p">())]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">choices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span>

            <span class="k">for</span> <span class="n">numCh</span><span class="p">,</span> <span class="n">choice</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">choices</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_matchFunction</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_matchFunction</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">choice</span><span class="p">):</span>
                    <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">choice</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="p">:</span>
                    <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">found</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_showDropDown</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">GetItem</span><span class="p">(</span><span class="n">numCh</span><span class="p">)</span>
                    <span class="n">toSel</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">toSel</span><span class="p">)</span>
                    <span class="k">break</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">GetFirstSelected</span><span class="p">(),</span> <span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hideOnNoMatch</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_showDropDown</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_listItemVisible</span><span class="p">()</span>

            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span> <span class="p">()</span>

        <span class="k">def</span> <span class="nf">onKeyDown</span> <span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">event</span> <span class="p">)</span> <span class="p">:</span>
            <span class="sd">&quot;&quot;&quot; Do some work when the user press on the keys:</span>
<span class="sd">                up and down: move the cursor</span>
<span class="sd">                left and right: move the search</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">skip</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">sel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">GetFirstSelected</span><span class="p">()</span>
            <span class="n">visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span><span class="o">.</span><span class="n">IsShown</span><span class="p">()</span>

            <span class="n">KC</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetKeyCode</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">KC</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">WXK_DOWN</span> <span class="p">:</span>
                <span class="k">if</span> <span class="n">sel</span> <span class="o">&lt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">GetItemCount</span> <span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">Select</span> <span class="p">(</span> <span class="n">sel</span><span class="o">+</span><span class="mi">1</span> <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_listItemVisible</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_showDropDown</span> <span class="p">()</span>
                <span class="n">skip</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">KC</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">WXK_UP</span> <span class="p">:</span>
                <span class="k">if</span> <span class="n">sel</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">Select</span> <span class="p">(</span> <span class="n">sel</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_listItemVisible</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_showDropDown</span> <span class="p">()</span>
                <span class="n">skip</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">KC</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">WXK_LEFT</span> <span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span><span class="p">:</span> <span class="k">return</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colSearch</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_colSearch</span> <span class="o">-=</span><span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_showDropDown</span> <span class="p">()</span>
            <span class="k">elif</span> <span class="n">KC</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">WXK_RIGHT</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span><span class="p">:</span> <span class="k">return</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colSearch</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">GetColumnCount</span><span class="p">()</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_colSearch</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_showDropDown</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">visible</span> <span class="p">:</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetKeyCode</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">WXK_RETURN</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_setValueFromSelected</span><span class="p">()</span>
                    <span class="n">skip</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetKeyCode</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">WXK_ESCAPE</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_showDropDown</span><span class="p">(</span> <span class="kc">False</span> <span class="p">)</span>
                    <span class="n">skip</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">skip</span> <span class="p">:</span>
                <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">onListItemSelected</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setValueFromSelected</span><span class="p">()</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">onClickToggleDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lastinsertionpoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetInsertionPoint</span><span class="p">()</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span> <span class="p">()</span>

        <span class="k">def</span> <span class="nf">onClickToggleUp</span> <span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">event</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetInsertionPoint</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lastinsertionpoint</span> <span class="p">)</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_showDropDown</span> <span class="p">(</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span><span class="o">.</span><span class="n">IsShown</span><span class="p">()</span> <span class="p">)</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span> <span class="p">()</span>

        <span class="k">def</span> <span class="nf">onControlChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_showDropDown</span><span class="p">(</span> <span class="kc">False</span> <span class="p">)</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>


        <span class="c1"># -- Interfaces methods</span>
        <span class="k">def</span> <span class="nf">SetMultipleChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choices</span><span class="p">,</span> <span class="n">colSearch</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">colFetch</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
            <span class="sd">&#39;&#39;&#39; Set multi-column choice</span>
<span class="sd">            &#39;&#39;&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span> <span class="o">=</span> <span class="n">choices</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span> <span class="o">=</span> <span class="p">[</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span><span class="p">]</span>

            <span class="n">flags</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_REPORT</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_SINGLE_SEL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_SORT_ASCENDING</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showHead</span><span class="p">:</span>
                <span class="n">flags</span> <span class="o">|=</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_NO_HEADER</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">SetWindowStyleFlag</span><span class="p">(</span><span class="n">flags</span><span class="p">)</span>

            <span class="c1">#prevent errors on &quot;old&quot; systems</span>
            <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;2.3&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">cmp</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">locale</span><span class="o">.</span><span class="n">strxfrm</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_updateDataList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span><span class="p">)</span>

            <span class="n">lChoices</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">lChoices</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ValuError</span><span class="p">(</span> <span class="s2">&quot;You have to pass me a multi-dimension list&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">numCol</span><span class="p">,</span> <span class="n">rowValues</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colNames</span><span class="p">:</span> <span class="n">colName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colNames</span><span class="p">[</span><span class="n">numCol</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span> <span class="n">colName</span> <span class="o">=</span> <span class="s2">&quot;Select </span><span class="si">%i</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">numCol</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">InsertColumn</span><span class="p">(</span><span class="n">numCol</span><span class="p">,</span> <span class="n">colName</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">numRow</span><span class="p">,</span> <span class="n">valRow</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">choices</span><span class="p">):</span>

                <span class="k">for</span> <span class="n">numCol</span><span class="p">,</span> <span class="n">colVal</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">valRow</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">numCol</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">InsertImageStringItem</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">maxint</span><span class="p">,</span> <span class="n">colVal</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">SetStringItem</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">numCol</span><span class="p">,</span> <span class="n">colVal</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">SetItemData</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">numRow</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_setListSize</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_colSearch</span> <span class="o">=</span> <span class="n">colSearch</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_colFetch</span> <span class="o">=</span> <span class="n">colFetch</span>

        <span class="k">def</span> <span class="nf">SetChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choices</span><span class="p">):</span>
            <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            Sets the choices available in the popup wx.ListBox.</span>
<span class="sd">            The items will be sorted case insensitively.</span>
<span class="sd">            &#39;&#39;&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span> <span class="o">=</span> <span class="n">choices</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">flags</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_REPORT</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_SINGLE_SEL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_SORT_ASCENDING</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">LC_NO_HEADER</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">SetWindowStyleFlag</span><span class="p">(</span><span class="n">flags</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">choices</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span> <span class="o">=</span> <span class="p">[</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">]</span>

            <span class="c1">#prevent errors on &quot;old&quot; systems</span>
            <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;2.3&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">cmp</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">locale</span><span class="o">.</span><span class="n">strxfrm</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_updateDataList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_choices</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">InsertColumn</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">colVal</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_choices</span><span class="p">):</span>
                <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">InsertImageStringItem</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">maxint</span><span class="p">,</span> <span class="n">colVal</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">SetStringItem</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colVal</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">SetItemData</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_setListSize</span><span class="p">()</span>

            <span class="c1"># there is only one choice for both search and fetch if setting a single column:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_colSearch</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_colFetch</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="k">def</span> <span class="nf">GetChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span>

        <span class="k">def</span> <span class="nf">SetSelectCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cb</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selectCallback</span> <span class="o">=</span> <span class="n">cb</span>

        <span class="k">def</span> <span class="nf">SetEntryCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cb</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entryCallback</span> <span class="o">=</span> <span class="n">cb</span>

        <span class="k">def</span> <span class="nf">SetMatchFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mf</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_matchFunction</span> <span class="o">=</span> <span class="n">mf</span>


        <span class="c1">#-- Internal methods</span>
        <span class="k">def</span> <span class="nf">_setValueFromSelected</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
            <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            Sets the wx.TextCtrl value from the selected wx.ListCtrl item.</span>
<span class="sd">            Will do nothing if no item is selected in the wx.ListCtrl.</span>
<span class="sd">            &#39;&#39;&#39;</span>
            <span class="n">sel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">GetFirstSelected</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">sel</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colFetch</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colFetch</span>
                <span class="k">else</span><span class="p">:</span> <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colSearch</span>

                <span class="n">itemtext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">GetItem</span><span class="p">(</span><span class="n">sel</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">GetText</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selectCallback</span><span class="p">:</span>
                    <span class="n">dd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">dd</span><span class="o">.</span><span class="n">GetItem</span><span class="p">(</span><span class="n">sel</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">GetText</span><span class="p">()</span>
                              <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">dd</span><span class="o">.</span><span class="n">GetColumnCount</span><span class="p">())]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_selectCallback</span><span class="p">(</span> <span class="n">values</span> <span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">SetValue</span> <span class="p">(</span><span class="n">itemtext</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SetInsertionPointEnd</span> <span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SetSelection</span> <span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_showDropDown</span> <span class="p">(</span> <span class="kc">False</span> <span class="p">)</span>


        <span class="k">def</span> <span class="nf">_showDropDown</span> <span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">show</span> <span class="o">=</span> <span class="kc">True</span> <span class="p">)</span> <span class="p">:</span>
            <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            Either display the drop down list (show = True) or hide it (show = False).</span>
<span class="sd">            &#39;&#39;&#39;</span>
            <span class="k">if</span> <span class="n">show</span> <span class="p">:</span>
                <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()</span>
                <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span> <span class="o">.</span> <span class="n">GetSizeTuple</span><span class="p">()</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span> <span class="o">.</span> <span class="n">ClientToScreenXY</span> <span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">height</span> <span class="p">)</span>
                <span class="k">if</span> <span class="n">size</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">()</span> <span class="o">!=</span> <span class="n">width</span> <span class="p">:</span>
                    <span class="n">size</span><span class="o">.</span><span class="n">SetWidth</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span><span class="o">.</span><span class="n">GetClientSize</span><span class="p">())</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="n">size</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">())</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_screenheight</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span> <span class="o">.</span> <span class="n">SetPosition</span> <span class="p">(</span> <span class="n">wx</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span> <span class="o">.</span> <span class="n">SetPosition</span> <span class="p">(</span> <span class="n">wx</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">height</span> <span class="o">-</span> <span class="n">size</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">())</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span><span class="o">.</span><span class="n">Show</span> <span class="p">(</span> <span class="n">show</span> <span class="p">)</span>

        <span class="k">def</span> <span class="nf">_listItemVisible</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
            <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            Moves the selected item to the top of the list ensuring it is always visible.</span>
<span class="sd">            &#39;&#39;&#39;</span>
            <span class="n">toSel</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">GetFirstSelected</span> <span class="p">()</span>
            <span class="k">if</span> <span class="n">toSel</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="k">return</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">EnsureVisible</span><span class="p">(</span> <span class="n">toSel</span> <span class="p">)</span>

        <span class="k">def</span> <span class="nf">_updateDataList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choices</span><span class="p">):</span>
            <span class="c1">#delete, if need, all the previous data</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">GetColumnCount</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">DeleteAllColumns</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">DeleteAllItems</span><span class="p">()</span>

            <span class="c1">#and update the dict</span>
            <span class="k">if</span> <span class="n">choices</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">numVal</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">choices</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">itemDataMap</span><span class="p">[</span><span class="n">numVal</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">numVal</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetColumnCount</span><span class="p">(</span><span class="n">numVal</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">_setListSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span><span class="p">:</span>
                <span class="n">choices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multiChoices</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">choices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span>

            <span class="n">longest</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">choices</span> <span class="p">:</span>
                <span class="n">longest</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">),</span> <span class="n">longest</span><span class="p">)</span>

            <span class="n">longest</span> <span class="o">+=</span> <span class="mi">6</span>
            <span class="n">itemcount</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">choices</span> <span class="p">)</span> <span class="p">,</span> <span class="mi">20</span> <span class="p">)</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="n">charheight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">GetCharHeight</span><span class="p">()</span>
            <span class="n">charwidth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">GetCharWidth</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">popupsize</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span> <span class="n">charwidth</span><span class="o">*</span><span class="n">longest</span><span class="p">,</span> <span class="n">charheight</span><span class="o">*</span><span class="n">itemcount</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdownlistbox</span><span class="o">.</span><span class="n">SetSize</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">popupsize</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropdown</span><span class="o">.</span><span class="n">SetClientSize</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">popupsize</span> <span class="p">)</span>

    <span class="k">class</span> <span class="nc">MyAUIFrame</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">mgr</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

            <span class="n">leftpanel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">))</span>
            <span class="n">rightpanel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">))</span>
            <span class="n">bottompanel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">))</span>
            <span class="n">toppanel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">))</span>
            <span class="n">centerpanel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">))</span>

            <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">rightpanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;rightpanel&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">leftpanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;leftpanel&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">toppanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;toppanel&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">bottompanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;bottompanel&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">centerpanel</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;centerpanel&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">mgr</span><span class="o">.</span><span class="n">AddPane</span><span class="p">(</span><span class="n">leftpanel</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span><span class="o">.</span><span class="n">Left</span><span class="p">()</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mgr</span><span class="o">.</span><span class="n">AddPane</span><span class="p">(</span><span class="n">rightpanel</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span><span class="o">.</span><span class="n">Right</span><span class="p">()</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mgr</span><span class="o">.</span><span class="n">AddPane</span><span class="p">(</span><span class="n">bottompanel</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span><span class="o">.</span><span class="n">Bottom</span><span class="p">()</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mgr</span><span class="o">.</span><span class="n">AddPane</span><span class="p">(</span><span class="n">toppanel</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span><span class="o">.</span><span class="n">Top</span><span class="p">()</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mgr</span><span class="o">.</span><span class="n">AddPane</span><span class="p">(</span><span class="n">centerpanel</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span><span class="o">.</span><span class="n">Center</span><span class="p">()</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Maximize</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">mgr</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">MyAUIApp</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">App</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">OnInit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="n">MyAUIFrame</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;CBMPy Gen2 GUI&#39;</span><span class="p">)</span>
            <span class="n">frame</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetTopWindow</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">runModelEditor</span><span class="p">(</span><span class="n">mod</span><span class="p">):</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">App</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">ModelEditor</span><span class="p">(</span><span class="n">mod</span><span class="p">)</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">app</span><span class="o">.</span><span class="n">SetTopWindow</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="n">app</span><span class="o">.</span><span class="n">MainLoop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">runMyAUIApp</span><span class="p">():</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">MyAUIApp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">app</span><span class="o">.</span><span class="n">MainLoop</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../cbmpy.html">
              <img class="logo" src="../../_static/pysces_cbm1_head.jpg" alt="Logo"/>
            </a></p><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../cbmpy.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2010-2017, Brett G. Olivier.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
    </div>

    

    
  </body>
</html>